<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>POLS 1600</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.31/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">POLS 1600</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../class/index.html"> 
<span class="menu-text">Class</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments/index.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="03-slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">POLS 1600</h1>
<p class="subtitle lead">Causal Inference in<br>Experimental Designs</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Updated Feb 20, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-map-location" aria-label="map-location"></i> Overview</h1>
<section id="class-plan" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="class-plan">Class Plan</h2>
<ul>
<li>Announcements</li>
<li>Feedback</li>
<li>Review</li>
<li>Class plan
<ul>
<li>Causal Inference</li>
<li>Notation for Causal Inference</li>
<li>Causal Identification</li>
<li>Causal Identification in Experiments</li>
<li><code>resume</code> data from QSS</li>
<li>Explore Broockman and Kalla (2016)</li>
</ul></li>
</ul>
</section>
<section id="annoucements" class="level2">
<h2 class="anchored" data-anchor-id="annoucements">Annoucements</h2>
<ul>
<li>Revised Schedule
<ul>
<li>Lecture 3 today</li>
<li>Read <i class="fa-solid fa-book" aria-label="book"></i> <span class="citation" data-cites="Broockman2016-pi">Broockman and Kalla (<a href="#ref-Broockman2016-pi" role="doc-biblioref">2016</a>)</span> <a href="../files/readings/broockman_kalla_2016.pdf" target="_blank">pdf</a></li>
<li>Lab 3 next week</li>
<li>Week 4 content spread out over weeks 5/6/7 condensed</li>
<li>More updates to come</li>
</ul></li>
</ul>
</section>
<section id="group-assignments" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="group-assignments">Group Assignments</h2>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-87d728e3903671701b6a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-87d728e3903671701b6a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Group 1","Group 2","Group 3","Group 4","Group 5","Group 6","Group 7","Group 8"],["Maia Eng","Andrew Rovinsky","Serafym Rybachkivskyi","Tiffany Eddy","Christopher Maron","Mia Hamilton","Mariana Melzer","Logan Szittai"],["Guadalupe Herrera","Spencer Lorin","Rachel Kim","Daniel Solomon","Daniel Baker","Emily Colon","Kahrie Langham","Keiley Thompson"],["Stephen Robinson","Lucinda Anderson","Kai Blades","Zoe Smith","Neve Diaz-Carr","Davis Kelly","Shannon Feerick-Hillenbrand","Lydell Dyer"],["Jeremiah Harrington","Serenity Hamilton","Emma Coleman","Lorena Calderon","Olivia Hanley","Talia Levine","Jarret Fernandes","Mahir Arora"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Group<\/th>\n      <th>1<\/th>\n      <th>2<\/th>\n      <th>3<\/th>\n      <th>4<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Group","targets":1},{"name":"1","targets":2},{"name":"2","targets":3},{"name":"3","targets":4},{"name":"4","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="feedback" class="level1">
<h1>Feedback</h1>
<section id="what-did-we-like" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="what-did-we-like">What did we like</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-25456233fe0778eb8337" style="width:100%;height:90%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-25456233fe0778eb8337">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["Data mapping is very interesting","I like making pretty graphs!","I like that we were able to create a plot and visualize our date, that was pretty cool.","It was fun to get to experiment with code ourselves, and figure out how we can change plots and their visuals","turning data into visual","This week has been the best week so far and learning about graphs has been really fun. The most useful thing so far was outlining and implementing the steps to complete today's lab-- I felt like I was keeping up and able to ask a few questions as well.","I thought that the lab was much easier to follow","I liked cleaning the data and mutating it to make it more understandable","I liked that you went over the process of HLOs because I was not sure how to approach them. Now i feel better on how to start the HLO process.","I enjoyed learning about how to employ certain functions to labels we created. It was much clearer in class than it was in the textbook and made me feel comfortable during the lab.","","I liked working in groups and also having the opportunity to ask lots of questions. I also liked being able to talk through the code as a class since I don't have a lot of (any) coding experience. I feel a little more confident after this class.","","I enjoyed making plots and graphs. It's fun to watch something be created from the messy code.","Being able to visualize the data","I liked creating the plot.","I thought it was interesting to create the data plot.","This week I enjoyed messing around with different characteristics of the graphics.","I liked being able to keep up for the most part. I think it a lot more fun when I am able to keep up!",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Likes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Likes","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="what-did-we-dislike" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="what-did-we-dislike">What did we dislike</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-16d6f9ec431f82cb869f" style="width:100%;height:90%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-16d6f9ec431f82cb869f">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["Data mapping also happens to be quite confusing and can become rather difficult","I'm still getting the hang of things, so sometimes it's hard to follow along.","That I'm still confused about each of the functions and I don't know exactly what I'm coding.","I feel like we haven't done a lot of coding ourselves, but have mostly just copied existing code. I am also not certain, but I felt like the tutorials were in base r, and not tidyverse r, and that made completing the tutorial harder. \n","NOTHING. i thought this week's lab was super duper helpful\n","The tutorial this week was a little confusing/frustrating.","","I had a hard time reloading the packages before every time we used the code","I wish we could go over a bit more in depth of what each code is doing for each part so that I have a better understanding of whats going on.","I didn't fully understand where some of the complex code chunks were coming from or why we were using them.","","I think you sometimes go through instructions too fast and me and my group would miss sections of code because you would switch tabs away from the code. If possible, it would be great to leave the code up for an extra minute or to repeat the instructions so everyone catches them.","","Labs still move quite quickly sometimes.","Getting error messages and not knowing how to solve them on my own","I felt like I was playing catch-up sometimes on Tuesday.","I kept getting errors on Tuesday when we were walking through steps which made it difficult to follow.","I found it difficult when parts of my code weren't working and I had no idea where to start in finding the problem.","One thing I didn't like is when I get an error code, it is so frustrating and I have no idea what to do.",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Dislikes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Dislikes","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[4,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<p>Every time you work in R</p>
<ul>
<li><p>Save your file to your course or project folder</p></li>
<li><p>Set your working directory</p></li>
<li><p>Load, and if needed, install packages</p></li>
<li><p>Maybe change some global options in your .Rmd file</p></li>
</ul>
</section>
<section id="setting-your-working-directory" class="level2">
<h2 class="anchored" data-anchor-id="setting-your-working-directory">Setting your working directory:</h2>
<ul>
<li>My default code for setting a working directory is:</li>
</ul>
<ul>
<li><p>This is really just a reminder to someone else using my code that they need to have their working directories set up correctly</p></li>
<li><p>R Studio sets the working directory automatically, when you knit the file</p></li>
<li><p>When I work on a file, I set the working directory manually</p></li>
</ul>
</section>
<section id="setting-your-working-directory-when-working-live" class="level2">
<h2 class="anchored" data-anchor-id="setting-your-working-directory-when-working-live">Setting your working directory when working “Live”</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://statisticsglobe.com/wp-content/uploads/2020/03/figure-2-set-working-directory-to-source-file-location-manually.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="packages-for-today" class="level2">
<h2 class="anchored" data-anchor-id="packages-for-today">Packages for today</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Pacakges for today</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>the_packages <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## R Markdown</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"kableExtra"</span>,<span class="st">"DT"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Tidyverse</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidyverse"</span>, <span class="st">"lubridate"</span>, <span class="st">"forcats"</span>, </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"haven"</span>, <span class="st">"labelled"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Extensions for ggplot</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ggmap"</span>,<span class="st">"ggrepel"</span>, <span class="st">"ggridges"</span>, </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ggthemes"</span>, <span class="st">"ggpubr"</span>, <span class="st">"GGally"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"scales"</span>, <span class="st">"dagitty"</span>, <span class="st">"ggdag"</span>, <span class="co">#&lt;&lt;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Data </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"COVID19"</span>,<span class="st">"maps"</span>,<span class="st">"mapdata"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"qss"</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Define a function to load (and if needed install) packages</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| label = "ipak"</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>ipak <span class="ot">&lt;-</span> <span class="cf">function</span>(pkg){</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    new.pkg <span class="ot">&lt;-</span> pkg[<span class="sc">!</span>(pkg <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[, <span class="st">"Package"</span>])]</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(new.pkg)) </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">install.packages</span>(new.pkg, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sapply</span>(pkg, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="do">## Install (if needed) and load libraries in the_packages</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">ipak</span>(the_packages)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>kableExtra         DT  tidyverse  lubridate    forcats      haven   labelled 
      TRUE       TRUE       TRUE       TRUE       TRUE       TRUE       TRUE 
     ggmap    ggrepel   ggridges   ggthemes     ggpubr     GGally     scales 
      TRUE       TRUE       TRUE       TRUE       TRUE       TRUE       TRUE 
   dagitty      ggdag    COVID19       maps    mapdata        qss 
      TRUE       TRUE       TRUE       TRUE       TRUE       TRUE </code></pre>
</div>
</div>
</section>
</section>
<section id="review" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-magnifying-glass" aria-label="magnifying-glass"></i> Review</h1>
<section id="review-data-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="review-data-wrangling">Review: Data wrangling</h2>
</section>
<section id="data-transformations" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="data-transformations">Data transformations</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p>You want to:</p>
<ul>
<li><p>Load some data</p></li>
<li><p>Combine multiple functions</p></li>
<li><p>Look at your data</p></li>
<li><p>Recode your data</p></li>
<li><p>Transform your data</p></li>
</ul>
</div><div class="column" style="width:70%;">
<div class="fragment">
<p>You could use</p>
<ul>
<li><p><code>read_*</code> functions</p></li>
<li><p><code>%&gt;%</code> the “pipe” operator</p></li>
<li><p><code>glimpse()</code> <code>head()</code>, <code>filter()</code>, <code>select()</code>, <code>arrange()</code></p></li>
<li><p><code>mutate()</code>, <code>case_when()</code>, <code>ifelse()</code></p></li>
<li><p><code>summarize()</code>, <code>group_by()</code></p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="data-visualization" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="data-visualization">Data Visualization</h2>
<ul>
<li><p>The grammar of graphics</p></li>
<li><p>At minimum you need:</p>
<ul>
<li><code>data</code></li>
<li><code>aesthetic</code> mappings</li>
<li><code>geometries</code></li>
</ul></li>
<li><p>Hey Jude, make a sad plot and make it better by:</p>
<ul>
<li><code>labels</code></li>
<li><code>themes</code></li>
<li><code>statistics</code></li>
<li><code>cooridnates</code></li>
<li><code>facets</code></li>
<li>transforming your data before plotting</li>
</ul></li>
</ul>
</section>
</section>
<section id="causal-inference" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Causal Inference</h1>
<section id="causal-claims-imply-counterfactual-comparisons" class="level2">
<h2 class="anchored" data-anchor-id="causal-claims-imply-counterfactual-comparisons">Causal claims imply counterfactual comparisons</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li><p>Causal claims imply claims about counterfactuals</p></li>
<li><p>What would have happened if we were to change some aspect of the world?</p></li>
</ul>
</div><div class="column" style="width:60%;">
<p><img src="https://media.philly.com/images/20150621-Groundhog-day.jpg" class="fragment img-fluid"></p>
</div>
</div>
</section>
<section id="whats-the-counter-factual-for-these-claims" class="level2">
<h2 class="anchored" data-anchor-id="whats-the-counter-factual-for-these-claims">What’s the counter factual for these claims:</h2>
<ul>
<li><p>Foreign aid increases develop</p></li>
<li><p>Wikileaks cost Hillary Clinton the 2016 election</p></li>
<li><p>Democracies don’t fight wars with other democracies</p></li>
<li><p>Universal Pre-K improves child development</p></li>
</ul>
</section>
<section id="casual-claims-are-are-all-around-us" class="level2">
<h2 class="anchored" data-anchor-id="casual-claims-are-are-all-around-us">Casual claims are are all around us</h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://images-na.ssl-images-amazon.com/images/I/A1qhBebbu6L.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:45%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://press.uchicago.edu/.imaging/mte/ucp/medium/dam/ucp/books/jacket/978/02/26/11/9780226112374.jpg/jcr:content/9780226112374.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="casual-claims-are-are-all-around-us-1" class="level2">
<h2 class="anchored" data-anchor-id="casual-claims-are-are-all-around-us-1">Casual claims are are all around us</h2>
<p>What are some questions that interest you?</p>
<p>What are the counterfactual comparisons they imply?</p>
</section>
</section>
<section id="notation-for-causal-inference" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Notation for Causal Inference</h1>
<section id="how-to-represent-causal-claims" class="level2">
<h2 class="anchored" data-anchor-id="how-to-represent-causal-claims">How to represent causal claims</h2>
<p>In this course, we will use two forms of notation to describe our causal claims.</p>
<ul>
<li><p>Directed Acyclic Graphs (DAGs, next lecture)</p></li>
<li><p><strong>Potential Outcomes Notation</strong></p></li>
</ul>
</section>
<section id="general-notation-variables" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="general-notation-variables">General Notation: Variables</h2>
<ul>
<li><p><code>Y</code> our <span class="blue">outcome</span> of interest</p></li>
<li><p><code>D</code> an indicator of <span class="blue">treatment</span> status</p>
<ul>
<li><code>D=1</code> <span class="math inline">\(\to\)</span> treated</li>
<li><code>D=0</code> <span class="math inline">\(\to\)</span> not treated (control)</li>
</ul></li>
<li><p><code>Z</code> an of <span class="blue">assignment</span> status</p>
<ul>
<li><code>Z=1</code> <span class="math inline">\(\to\)</span> assigned to treatment</li>
<li><code>Z=0</code> <span class="math inline">\(\to\)</span> assigned to control</li>
</ul></li>
<li><p><code>X</code> a <span class="blue">covariate</span> or <span class="blue">predictor</span> we can measure/observe</p></li>
<li><p><code>U</code> <span class="blue">unmeasured</span> covariates</p></li>
</ul>
</section>
<section id="expected-values" class="level2">
<h2 class="anchored" data-anchor-id="expected-values">Expected Values</h2>
<div class="nonincremental">
<ul>
<li><p>The <span class="math inline">\(E[Y]\)</span> reads as “the expected value of Y”</p></li>
<li><p><span class="math inline">\(E[Y]\)</span> is defined as a probability weighted average based on the unconditional probability of Y ( <span class="math inline">\(f(y)\)</span> )</p></li>
</ul>
<p><span class="math display">\[\operatorname{E}[Y] = \int_{-\infty}^\infty y f(y)\, dy\]</span></p>
</div>
</section>
<section id="conditional-expectations" class="level2">
<h2 class="anchored" data-anchor-id="conditional-expectations">Conditional Expectations</h2>
<div class="nonincremental">
<ul>
<li><p>The <span class="math inline">\(E[Y|X=x]\)</span> reads as “the expected value of Y conditional on the value of X”</p></li>
<li><p><span class="math inline">\(E[Y|X=x]\)</span> is defined as a probability weighted average of Y based on the conditional probability of Y given X ( <span class="math inline">\(y f_{Y|X}(y|x)\)</span> )</p></li>
</ul>
<p><span class="math display">\[\operatorname{E}[Y \vert X=x] = \int_{-\infty}^\infty y f (y\vert x) \, dy\]</span></p>
</div>
</section>
<section id="estimands-estimators-and-estimates" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="estimands-estimators-and-estimates">Estimands, Estimators and Estimates</h2>
<ul>
<li><p><span class="blue">Estimand</span> the thing we want to know.</p>
<ul>
<li>Sometimes called a <span class="blue">parameter (<span class="math inline">\(\theta\)</span>, “theta”)</span> or <span class="blue">quantity of interest</span></li>
<li>The expected value of heights in POLS 1600 (<span class="math inline">\(\theta =E[X]\)</span>)</li>
</ul></li>
<li><p><span class="blue">Estimator</span> a rule or method for calculating an <span class="blue">estimate</span> of our <span class="blue">estimand</span></p>
<ul>
<li>An average of a sample of 10 student’s heights in POLS 1600</li>
<li><span class="math inline">\(\hat{\theta} = \bar{x} = 1/n*\sum_1^{n} x_i\)</span></li>
</ul></li>
<li><p><span class="blue">Estimate:</span> a value produced by our estimator for some data</p>
<ul>
<li>The average of our 10 person sample is <code>5'10''</code></li>
</ul></li>
</ul>
</section>
<section id="error-and-bias" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="error-and-bias">Error and Bias</h2>
<p>We’ll talk about lots of types of bias throughout this course.</p>
<p>Formally, we’ll say an estimate, <span class="math inline">\(\hat{\theta}\)</span> (“theta hat”) is an unbiased estimator of a parameter, <span class="math inline">\(\theta\)</span> (“theta”) if:</p>
<p><span class="math display">\[
E[\hat{\theta}] = \theta
\]</span></p>
<p>Bias or error, <span class="math inline">\(\epsilon\)</span>, is the difference between our estimate and the truth</p>
<p><span class="math display">\[
\epsilon = \hat{\theta} -\theta
\]</span></p>
<p>An estimator is unbiased if, on average, the errors equal 0</p>
<p><span class="math display">\[
E[\epsilon] = E[\hat{\theta} -\theta] = 0
\]</span></p>
</section>
<section id="bias-vs.-variance" class="level2">
<h2 class="anchored" data-anchor-id="bias-vs.-variance">Bias vs.&nbsp;variance</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://www.cs.cornell.edu/courses/cs4780/2018fa/lectures/images/bias_variance/bullseye.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="the-bias-variance-tradeoff" class="level2">
<h2 class="anchored" data-anchor-id="the-bias-variance-tradeoff">The bias-variance tradeoff</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="http://scott.fortmann-roe.com/docs/docs/BiasVariance/biasvariance.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="potential-outcomes-notation" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="potential-outcomes-notation">Potential outcomes notation</h2>
<ul>
<li><span class="math inline">\(Y_i(1)\)</span> describes individual <span class="math inline">\(i\)</span>’s outcome, <span class="math inline">\(Y_i\)</span> if they <span class="blue">received the treatment</span> <span class="math inline">\((D_i = 1)\)</span>
<ul>
<li>Shorthand for <span class="math inline">\(Y_i(D_i=1)\)</span></li>
<li>Paul’s Covid-19 status (<span class="math inline">\(Y_i\)</span>) with the vaccine (<span class="math inline">\(D_i = 1\)</span>)</li>
</ul></li>
<li><span class="math inline">\(Y_i(0)\)</span> describes individual <span class="math inline">\(i\)</span>’s outcome, <span class="math inline">\(Y_i\)</span> if they <span class="blue">did not receive the treatment</span> <span class="math inline">\((D_i = 0)_i\)</span>
<ul>
<li>Shorthand for <span class="math inline">\(Y_i(D_i=0)\)</span></li>
<li>Paul’s Covid-19 status (<span class="math inline">\(Y_i\)</span>) without the vaccine (<span class="math inline">\(D_i=0\)</span>)</li>
</ul></li>
</ul>
<p>. . .</p>
<p>The <span class="blue">treatment received</span> determines which <span class="blue">potential outcome</span> we actually <span class="blue">observe</span>:</p>
<p><span class="math display">\[
Y_i = (1 - D_i)*Y_i(0) + D_i*Y_i(1)
\]</span></p>
<p>Potential outcomes are fixed, but we only observe one (of many) potential outcomes <span class="math inline">\(\to\)</span> <em>Fundamental Problem of Causal Inference</em></p>
</section>
<section id="fundamental-problem-of-causal-inference" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="fundamental-problem-of-causal-inference">Fundamental Problem of Causal Inference</h2>
<p>The individual causal effect (ICE), <span class="math inline">\(\tau_i\)</span>, is defined as</p>
<p><span class="math display">\[
\tau_i \equiv Y_i(1) - Y_i(0)
\]</span></p>
<ul>
<li><p>The <span class="blue">fundamental problem of causal inference</span> is that we only ever see one potential outcome for an individual, and so it’s <span class="blue">impossible to know</span> the causal effect of some intervention for that individual</p></li>
<li><p>The ICE is <span class="blue">unidentified</span></p></li>
</ul>
</section>
</section>
<section id="causal-identification" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Causal Identification</h1>
<section id="identification" class="level2">
<h2 class="anchored" data-anchor-id="identification">Identification</h2>
<ul>
<li><p>Identification refers to <span class="blue">what we can learn</span> from the data available</p></li>
<li><p>A quantity of interest is <span class="blue">identified</span> if, with infinite data it can only take one value</p></li>
<li><p>Mathematically, we’ll sometimes say a coefficient in an equation is <span class="blue">unidentified</span> if</p>
<ul>
<li><p>We have more predictors than observations, or</p></li>
<li><p>Some of predictors are linear combinations of other predictors.</p></li>
</ul></li>
</ul>
</section>
<section id="causal-identification-1" class="level2">
<h2 class="anchored" data-anchor-id="causal-identification-1">Causal Identification</h2>
<ul>
<li><p><span class="blue">Casual Identification</span> refers to “the assumptions needed for statistical estimates to be given a causal interpretation” <a href="http://lukekeele.com/wp-content/uploads/2016/03/causal.pdf" target="_blank">Keele (2015)</a></p></li>
<li><p><span class="blue">What’s Your Casual Identification Strategy</span> What are the assumptions that make your research design credible?</p></li>
<li><p><strong>Identification &gt; Estimation</strong></p></li>
</ul>
</section>
<section id="observational-vs-experimental-designs" class="level2">
<h2 class="anchored" data-anchor-id="observational-vs-experimental-designs">Observational vs Experimental Designs</h2>
<ul>
<li><p><span class="blue">Experimental designs</span> are studies in which a causal variable of interest, the <em>treatement</em>, is <span class="blue">manipulated by the researcher</span> to examine its causal effects on some <em>outcome</em> of interest</p></li>
<li><p><span class="blue">Observational designs</span> are studies in which a causal variable of interest is determined by someone/thing <span class="blue">other than the researcher</span> (nature, governments, people, etc.)</p></li>
</ul>
</section>
</section>
<section id="causal-identification-in-experimental-designs" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Causal Identification in Experimental Designs</h1>
<section id="the-fpoci-is-a-problem-of-missing-data" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="the-fpoci-is-a-problem-of-missing-data">The FPoCI is a problem of missing data</h2>
<p>Recall that an individual causal effect <span class="math inline">\(\tau_i\)</span>, is defined as:</p>
<p><span class="math display">\[
\tau_i \equiv Y_i(1) - Y_i(0)
\]</span></p>
<p>The problem is that for any one individual, we only observe <span class="math inline">\(Y_i(1)\)</span> or <span class="math inline">\(Y_i(0)\)</span>, but never both.</p>
<ul>
<li>If Paul got the vaccine <span class="math inline">\((Y_{Paul}(Vaxxed)=\text{Covid Free})\)</span>, then we don’t know what Paul’s health status would have been, had he not got the vaccine <span class="math inline">\((Y_{Paul}(Unvaxxed) =???)\)</span></li>
</ul>
</section>
<section id="a-statistical-solution-to-the-fpoci" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="a-statistical-solution-to-the-fpoci">A statistical solution to the FPoCI</h2>
<p>Rather than focus individual causal effects:</p>
<p><span class="math display">\[
\tau_i \equiv Y_i(1) - Y_i(0)
\]</span></p>
<p>We focus on average causal effects (Average Treatment Effects [ATEs]):</p>
<p><span class="math display">\[
E[\tau_i] = \overbrace{E[Y_i(1) - Y_i(0)]}^{\text{Average of a difference}} = \overbrace{E[Y_i(1)] - E[Y_i(0)]}^{\text{Difference of Averages}}
\]</span></p>
<p>When does the difference of averages provide us with a good estimate of the average difference?</p>
<p>Let’s consider a simple example</p>
</section>
<section id="does-eating-chocolate-make-you-happy" class="level2">
<h2 class="anchored" data-anchor-id="does-eating-chocolate-make-you-happy">Does eating chocolate make you happy?</h2>
<ul>
<li><p><span class="math inline">\(Y_i\)</span> happiness measured on a 0-10 scale</p></li>
<li><p><span class="math inline">\(D_i\)</span> whether a person ate <span style="color: chocolate">chocolate</span> <span class="math inline">\((D=1)\)</span> or <span style="color: purple">fruit</span> <span class="math inline">\((D = 0)\)</span></p></li>
<li><p><span class="math inline">\(Y_i(1)\)</span> a person’s happiness eating <span style="color: chocolate">chocolate</span></p></li>
<li><p><span class="math inline">\(Y_i(0)\)</span> a person’s happiness eating <span style="color: purple">fruit</span></p></li>
<li><p><span class="math inline">\(X_i\)</span> a person’s self-reported preference <span class="math inline">\((X_i \in\)</span> {<span style="color: chocolate">chocolate</span>, <span style="color:purple">fruit</span> })</p></li>
</ul>
</section>
<section id="section" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section"></h2>
<div class="columns">
<div class="column" style="width:45%;">
<section id="potential-outcomes" class="level4">
<h4 class="anchored" data-anchor-id="potential-outcomes">Potential Outcomes:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 47%">
<col style="width: 45%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(Y_i(1)\)</span></th>
<th style="text-align: left;"><span class="math inline">\(Y_i(0)\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">6</span></td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
<td style="text-align: right;">-4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">9</span></td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(E[Y_i(1)]\)</span></th>
<th style="text-align: right;"><span class="math inline">\(E[Y_i(0)]\)</span></th>
<th style="text-align: right;"><span class="math inline">\(E[\tau_i]\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:45%;">
<ul>
<li><p>If we could observe everyone’s potential outcomes, we could calculate the ICE</p></li>
<li><p>On average eating chocolate increases happiness by 1 point on our 10-point scale (ATE = 1)</p></li>
<li><p>Suppose we conducted a study and let folks <span class="blue">select</span> what they wanted to eat.</p></li>
</ul>
</div>
</div>
</section>
<section id="section-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-1"></h2>
<div class="columns">
<div class="column" style="width:45%;">
<section id="potential-outcomes-1" class="level4">
<h4 class="anchored" data-anchor-id="potential-outcomes-1">Potential Outcomes:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 47%">
<col style="width: 45%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(Y_i(1)\)</span></th>
<th style="text-align: left;"><span class="math inline">\(Y_i(0)\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">6</span></td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
<td style="text-align: right;">-4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">9</span></td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(E[Y_i(1)]\)</span></th>
<th style="text-align: right;"><span class="math inline">\(E[Y_i(0)]\)</span></th>
<th style="text-align: right;"><span class="math inline">\(ATE\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:45%;">
<section id="observed-treatment" class="level4">
<h4 class="anchored" data-anchor-id="observed-treatment">Observed Treatment:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">9</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.57</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">-3.43</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div>
</div>
</section>
<section id="section-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-2"></h2>
<div class="columns">
<div class="column" style="width:45%;">
<section id="observed-treatment-1" class="level4">
<h4 class="anchored" data-anchor-id="observed-treatment-1">Observed Treatment:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">9</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.57</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">-3.43</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:45%;">
<section id="selection-bias" class="level4">
<h4 class="anchored" data-anchor-id="selection-bias">Selection Bias</h4>
<ul>
<li><p>Our estimate of the ATE is <span class="blue">biased</span> by the fact that folks who prefer fruit seem to be happier than folks who prefer chocolate in this example</p></li>
<li><p>In general, <span class="blue">selection bias</span> occurs when folks who receive the treatment differ systematically from folks who don’t</p></li>
<li><p>What if instead of letting people pick and choose, we <span class="blue">randomly assigned</span> half our respondents to <span style="color: chocolate">chocolate</span> and half to receive <span style="color: purple">fruit</span></p></li>
</ul>
</section>
</div>
</div>
</section>
<section id="section-3" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-3"></h2>
<div class="columns">
<div class="column" style="width:45%;">
<section id="potential-outcomes-2" class="level4">
<h4 class="anchored" data-anchor-id="potential-outcomes-2">Potential Outcomes:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 47%">
<col style="width: 45%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(Y_i(1)\)</span></th>
<th style="text-align: left;"><span class="math inline">\(Y_i(0)\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\tau_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">6</span></td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
<td style="text-align: right;">-4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">9</span></td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(E[Y_i(1)]\)</span></th>
<th style="text-align: right;"><span class="math inline">\(E[Y_i(0)]\)</span></th>
<th style="text-align: right;"><span class="math inline">\(ATE\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:45%;">
<section id="randomly-assigned-treatment" class="level4">
<h4 class="anchored" data-anchor-id="randomly-assigned-treatment">Randomly Assigned Treatment:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6.2</td>
<td style="text-align: right;">5.2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div>
</div>
</section>
<section id="section-4" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-4"></h2>
<div class="columns">
<div class="column" style="width:45%;">
<section id="randomly-assigned-treatment-1" class="level4">
<h4 class="anchored" data-anchor-id="randomly-assigned-treatment-1">Randomly Assigned Treatment:</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6.2</td>
<td style="text-align: right;">5.2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:45%;">
<section id="random-assignment" class="level4">
<h4 class="anchored" data-anchor-id="random-assignment">Random Assignment</h4>
<ul>
<li><p>When treatment has been <span class="blue">randomly assigned</span>, a difference in sample means provides an <span class="blue">unbiased</span> estimate of the <span class="blue">ATE</span></p></li>
<li><p>The fact that our <span class="math inline">\(\hat{ATE} = ATE\)</span> in this example is pure coincidence.</p></li>
<li><p>If we randomly assigned treatment a different way, we’d get a different estimate.</p></li>
<li><p>In general unbiased estimators will tend to be neither too high nor too low (e.g.&nbsp;<span class="math inline">\(E[\hat{\theta} - \theta] = 0\)</span>])</p></li>
</ul>
</section>
</div>
</div>
</section>
<section id="estimating-an-average-treatment-effect" class="level2">
<h2 class="anchored" data-anchor-id="estimating-an-average-treatment-effect">Estimating an Average Treatment Effect</h2>
<p>If we treatment has been randomly assigned, we can estimate the ATE by taking the difference of means between treatment and control:</p>
<p><span class="math display">\[
\begin{align*}
E \left[ \frac{\sum_1^m Y_i}{m}-\frac{\sum_{m+1}^N Y_i}{N-m}\right]&amp;=\overbrace{E \left[ \frac{\sum_1^m Y_i}{m}\right]}^{\substack{\text{Average outcome}\\
\text{among treated}\\ \text{units}}}
-\overbrace{E \left[\frac{\sum_{m+1}^N Y_i}{N-m}\right]}^{\substack{\text{Average outcome}\\
\text{among control}\\ \text{units}}}\\
&amp;= E [Y_i(1)|D_i=1] -E[Y_i(0)|D_i=0]
\end{align*}
\]</span></p>
<p>That is, the ATE is causally identified by the <strong>difference of means</strong> estimator in an experimental design</p>
</section>
<section id="section-5" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-5"></h2>
<div class="columns">
<div class="column" style="width:30%;">
<section id="random-assignment-1" class="level4">
<h4 class="anchored" data-anchor-id="random-assignment-1">Random Assignment 1</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6.2</td>
<td style="text-align: right;">5.2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:30%;">
<section id="random-assignment-2" class="level4">
<h4 class="anchored" data-anchor-id="random-assignment-2">Random Assignment 2</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">6</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">8</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">3</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6.6</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">3.8</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div><div class="column" style="width:30%;">
<section id="random-assignment-3" class="level4">
<h4 class="anchored" data-anchor-id="random-assignment-3">Random Assignment 3</h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(d_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(y_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">6</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">5</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">10</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">9</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: purple !important;">fruit</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">7</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">1</span></td>
<td style="text-align: left;"><span style="     color: chocolate !important;">4</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="     color: chocolate !important;">chocolate</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
<td style="text-align: left;"><span style="     color: purple !important;">0</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_{d=0}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\hat{ATE}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">-0.4</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</div>
</div>
</section>
<section id="distribution-of-sample-ates" class="level2">
<h2 class="anchored" data-anchor-id="distribution-of-sample-ates">Distribution of Sample ATEs</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03-slides_files/figure-revealjs/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="why-random-assignment-matters" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="why-random-assignment-matters">Why Random Assignment Matters?</h2>
<p>Formally, randomly assigning treatments creates <span class="blue">statistical independence</span> <span class="math inline">\((\unicode{x2AEB})\)</span> between treatment ( <span class="math inline">\(D\)</span> ) and potential outcomes ( <span class="math inline">\(Y(1),Y(0)\)</span> ) as well as any observed ( <span class="math inline">\(X\)</span> ) or unobserved confounders ( <span class="math inline">\(U\)</span> ):</p>
<p><span class="math display">\[Y_i(1),Y_i(0),\mathbf{X_i},\mathbf{U_i} \unicode{x2AEB} D_i\]</span></p>
<p>Practically, what this means is that what we can observe ( differences in conditional means for <span class="blue">treated</span> and <span class="blue">control</span> ), provide good (<span class="blue">unbiased</span>) estimates of what we’re trying to learn about (<span class="blue">Average Treatment Effects</span>)</p>
</section>
<section id="causal-identification-with-experimental-designs" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="causal-identification-with-experimental-designs">Causal Identification with Experimental Designs</h2>
<p>Causal identification for experimental designs requires very few assumptions:</p>
<ul>
<li><p><span class="blue">Independence</span> (Satisfied by Randomization)</p>
<ul>
<li><span class="math inline">\(Y(1), Y(0),X,U, \perp D\)</span></li>
</ul></li>
<li><p><span class="blue">SUTVA</span> Stable Unit Treatment Value Assumption (Depends on features of the design)</p>
<ul>
<li>No interference between units <span class="math inline">\(Y_i(d_1, d_2, \dots, d_N) = Y_i(d_i)\)</span></li>
<li>No hidden values of the treatment/Variation in the treatment</li>
</ul></li>
</ul>
</section>
<section id="random-assignment-creates-testable-implications" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="random-assignment-creates-testable-implications">Random assignment creates testable implications</h2>
<ul>
<li><p>If treatment has been randomly assigned, we would expect treatment and control groups to <span class="blue">look similar</span> in terms of <span class="blue">pre-treatment covariates</span></p>
<ul>
<li>We can show <span class="blue">covariate balance</span> by comparing the means in each treatment group</li>
</ul></li>
<li><p>If the treatment had an effect, than we can credibly claim that that effect was due to the presence or absence of the treatment, and not some alternative explanation.</p></li>
<li><p>This type of clean <span class="blue">apples-to-apples</span> counterfactual comparison is what people mean when they talk about an <em>experimental ideal</em></p></li>
</ul>
</section>
<section id="no-causation-without-manipulation" class="level2">
<h2 class="anchored" data-anchor-id="no-causation-without-manipulation">No Causation without Manipulation?</h2>
<ul>
<li>“No causation without manipulation” - <a href="https://www.jstor.org/stable/2289064" target="_blank">Holland (1986)</a></li>
<li>Causal effects are well defined when we can imagine manipulating (changing) the value of <span class="math inline">\(D_i\)</span> and only <span class="math inline">\(D_i\)</span></li>
<li>But what about the “effects” of things like:
<ul>
<li>Race</li>
<li>Sex</li>
<li>Democracy</li>
</ul></li>
<li>Studying the effects of these factors requires strong theory and clever design <a href="https://scholar.harvard.edu/files/msen/files/race_causality.pdf" target="_blank">Sen and Wasow (2016)</a></li>
</ul>
</section>
</section>
<section id="estimating-ates-with-the-resume-data" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-code" aria-label="code"></i> Estimating ATEs with the <code>resume</code> data</h1>
<section id="the-resume-experimento" class="level2">
<h2 class="anchored" data-anchor-id="the-resume-experimento">The Resume Experimento</h2>
<p>Let’s take a look at the resume experiment from your text book and compare some of Imai’s code to its <code>tidyverse</code> equivalent</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure qss package is loaded</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qss)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"resume"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="high-level-overview-p.-34" class="level2">
<h2 class="anchored" data-anchor-id="high-level-overview-p.-34">High level Overview (p.&nbsp;34)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(resume)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4870    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(resume)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  firstname    sex  race call
1   Allison female white    0
2   Kristen female white    0
3   Lakisha female black    0
4   Latonya female black    0
5    Carrie female white    0
6       Jay   male white    0</code></pre>
</div>
</div>
</section>
<section id="high-level-overview-p.-34-1" class="level2">
<h2 class="anchored" data-anchor-id="high-level-overview-p.-34-1">High level Overview (p.&nbsp;34)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(resume)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  firstname             sex                race                call        
 Length:4870        Length:4870        Length:4870        Min.   :0.00000  
 Class :character   Class :character   Class :character   1st Qu.:0.00000  
 Mode  :character   Mode  :character   Mode  :character   Median :0.00000  
                                                          Mean   :0.08049  
                                                          3rd Qu.:0.00000  
                                                          Max.   :1.00000  </code></pre>
</div>
</div>
</section>
<section id="crosstabs" class="level2">
<h2 class="anchored" data-anchor-id="crosstabs">Crosstabs</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>race.call.tab <span class="ot">&lt;-</span> <span class="fu">table</span>(<span class="at">race =</span> resume<span class="sc">$</span>race,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">call =</span> resume<span class="sc">$</span>call)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>race.call.tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       call
race       0    1
  black 2278  157
  white 2200  235</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">addmargins</span>(race.call.tab)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       call
race       0    1  Sum
  black 2278  157 2435
  white 2200  235 2435
  Sum   4478  392 4870</code></pre>
</div>
</div>
</section>
<section id="tidy-crosstab" class="level2">
<h2 class="anchored" data-anchor-id="tidy-crosstab">Tidy crosstab</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>resume <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race, call)<span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> call, <span class="at">values_from =</span> n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
# Groups:   race [2]
  race    `0`   `1`
  &lt;chr&gt; &lt;int&gt; &lt;int&gt;
1 black  2278   157
2 white  2200   235</code></pre>
</div>
</div>
</section>
<section id="calculating-call-back-rates" class="level2">
<h2 class="anchored" data-anchor-id="calculating-call-back-rates">Calculating Call Back Rates</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Overall</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(race.call.tab[,<span class="dv">2</span>])<span class="sc">/</span><span class="fu">nrow</span>(resume)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.08049281</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Black names</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>cb_bl <span class="ot">&lt;-</span> <span class="fu">sum</span>(race.call.tab[<span class="dv">1</span>,<span class="dv">2</span>])<span class="sc">/</span><span class="fu">sum</span>(race.call.tab[<span class="dv">1</span>,])</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># White Names</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>cb_wh <span class="ot">&lt;-</span> <span class="fu">sum</span>(race.call.tab[<span class="dv">2</span>,<span class="dv">2</span>])<span class="sc">/</span><span class="fu">sum</span>(race.call.tab[<span class="dv">2</span>,])</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ATE</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>cb_wh <span class="sc">-</span> cb_bl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.03203285</code></pre>
</div>
</div>
</section>
<section id="calculating-call-back-rates-with-group_by" class="level2">
<h2 class="anchored" data-anchor-id="calculating-call-back-rates-with-group_by">Calculating Call Back Rates with group_by()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>resume <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race)<span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">call_back =</span> <span class="fu">mean</span>(call)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  race  call_back
  &lt;chr&gt;     &lt;dbl&gt;
1 black    0.0645
2 white    0.0965</code></pre>
</div>
</div>
</section>
<section id="factor-variables-in-base-r" class="level2">
<h2 class="anchored" data-anchor-id="factor-variables-in-base-r">Factor variables in Base R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>resume<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>resume<span class="sc">$</span>type[resume<span class="sc">$</span>race <span class="sc">==</span> <span class="st">"black"</span> <span class="sc">&amp;</span> resume<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"female"</span>] <span class="ot">&lt;-</span> <span class="st">"BlackFemale"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>resume<span class="sc">$</span>type[resume<span class="sc">$</span>race <span class="sc">==</span> <span class="st">"black"</span> <span class="sc">&amp;</span> resume<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"male"</span>] <span class="ot">&lt;-</span> <span class="st">"BlackMale"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>resume<span class="sc">$</span>type[resume<span class="sc">$</span>race <span class="sc">==</span> <span class="st">"white"</span> <span class="sc">&amp;</span> resume<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"female"</span>] <span class="ot">&lt;-</span> <span class="st">"WhiteFemale"</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>resume<span class="sc">$</span>type[resume<span class="sc">$</span>race <span class="sc">==</span> <span class="st">"white"</span> <span class="sc">&amp;</span> resume<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"male"</span>] <span class="ot">&lt;-</span> <span class="st">"WhiteMale"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="factor-variables-in-tidy-r" class="level2">
<h2 class="anchored" data-anchor-id="factor-variables-in-tidy-r">Factor variables in Tidy R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>resume <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_tidy =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="st">"black"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"female"</span> <span class="sc">~</span> <span class="st">"BlackFemale"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="st">"black"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">~</span> <span class="st">"BlackMale"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="st">"white"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"female"</span> <span class="sc">~</span> <span class="st">"WhiteFemale"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="st">"white"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">~</span> <span class="st">"WhiteMale"</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> resume</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="comparing-approaches" class="level2">
<h2 class="anchored" data-anchor-id="comparing-approaches">Comparing approaches</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="at">base=</span> resume<span class="sc">$</span>type, <span class="at">tidy=</span> resume<span class="sc">$</span>type_tidy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             tidy
base          BlackFemale BlackMale WhiteFemale WhiteMale
  BlackFemale        1886         0           0         0
  BlackMale             0       549           0         0
  WhiteFemale           0         0        1860         0
  WhiteMale             0         0           0       575</code></pre>
</div>
</div>
</section>
<section id="visualizing-call-back-rates-by-name" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-call-back-rates-by-name">Visualizing Call Back Rates by Name</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Figure</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>resume <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race, sex,firstname)<span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Y =</span> <span class="fu">mean</span>(call),</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Y)) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstname =</span> forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(firstname,Y)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">%&gt;%</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Y, firstname,<span class="at">col=</span>race, <span class="at">size=</span>n))<span class="sc">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(sex<span class="sc">~</span>.,<span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03-slides_files/figure-revealjs/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="broockman-and-kalla-2016" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-code" aria-label="code"></i> Broockman and Kalla (2016)</h1>
<section id="reading-academic-papers" class="level2">
<h2 class="anchored" data-anchor-id="reading-academic-papers">Reading Academic Papers</h2>
<ul>
<li>Reading academic papers is a skill and takes practice.</li>
<li>You should aim to answer the following:
<ul>
<li>What’s the research question?</li>
<li>What’s the theoretical framework?</li>
<li>What’s the empirical design?</li>
<li>What’s are the main results?</li>
</ul></li>
</ul>
</section>
<section id="study-design-a-placebo-controlled-field-experiment" class="level2">
<h2 class="anchored" data-anchor-id="study-design-a-placebo-controlled-field-experiment">Study Design :A placebo-controlled field experiment</h2>
<ol type="1">
<li>Recruited from voter files to complete a baseline survey</li>
<li>Among those who complete the survey, half are assigned to receive an intervention and half are assigned to receive a placebo</li>
<li>Only some are actually home or open the door when the canvassers knock.</li>
<li>These people are then recruited to participate in a series of surveys 3 days, 3 weeks, 6 weeks, and 3 months after the initial intervention.</li>
</ol>
</section>
<section id="data-for-thursday" class="level2">
<h2 class="anchored" data-anchor-id="data-for-thursday">Data for Thursday</h2>
<p>Let’s load the data from the orginal study</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://pols1600.paultesta.org/files/data/03_lab.rda"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="codebook" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="codebook">Codebook</h2>
<ul>
<li><code>completed_baseline</code> whether someone completed the baseline survey (“Survey”) or not (“No Survey”)</li>
<li><code>treatment_assigned</code> what intervention someone who completed the baseline survey was assigned two (treatment= “Trans-Equality”, placebo = “Recycling”)</li>
<li><code>answered_door</code> whether someone answered the door (“Yes”) or not (“No”) when a canvasser came to their door</li>
<li><code>treatment_group</code> the treatment assignments of those who answered the door (treatment= “Trans-Equality”, placebo = “Recycling”)</li>
<li><code>vf_age</code> the age of the person in years</li>
<li><code>vf_female</code> the respondent’s sex (female = 1, male = 0)</li>
<li><code>vf_democrat</code> whether the person was a registered Democract (Democrat=1, 0 otherwise)</li>
<li><code>vf_white</code> whether the person was white (White=1, 0 otherwise)</li>
<li><code>vf_vg_12</code> whether the person voted in the 2012 general election (voted = 1, 0 otherwise)</li>
</ul>
</section>
<section id="hlo" class="level2">
<h2 class="anchored" data-anchor-id="hlo">HLO</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 68,378
Columns: 14
$ completed_baseline &lt;chr&gt; "No Survey", "No Survey", "No Survey", "No Survey",…
$ treatment_assigned &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ answered_door      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ treatment_group    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ vf_age             &lt;dbl&gt; 23.00000, 38.00000, 48.00000, 49.20192, 49.20192, 4…
$ vf_female          &lt;dbl&gt; 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, …
$ vf_democrat        &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, …
$ vf_white           &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, …
$ vf_vg_12           &lt;dbl&gt; 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, …
$ therm_trans_t0     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ therm_trans_t1     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ therm_trans_t2     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ therm_trans_t3     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ therm_trans_t4     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</code></pre>
</div>
</div>
</section>
<section id="study-design" class="level2">
<h2 class="anchored" data-anchor-id="study-design">Study Design</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>completed_baseline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
No Survey    Survey 
    66553      1825 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>treatment_assigned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Recycling Trans-Equality 
           913            912 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>answered_door)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  No  Yes 
1324  501 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>treatment_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Recycling Trans-Equality 
           255            246 </code></pre>
</div>
</div>
</section>
<section id="assessing-balance-in-covariates" class="level2">
<h2 class="anchored" data-anchor-id="assessing-balance-in-covariates">Assessing balance in covariates</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(completed_baseline <span class="sc">==</span> <span class="st">"Survey"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(treatment_assigned,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"vf_"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treatment_assigned)<span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"vf_"</span>), mean)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="ot">-&gt;</span> pretreatment_balance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assessing-balance-in-covariates-1" class="level2">
<h2 class="anchored" data-anchor-id="assessing-balance-in-covariates-1">Assessing balance in covariates</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>pretreatment_balance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  treatment_assigned vf_age vf_female vf_democrat vf_white vf_vg_12
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 Recycling            46.3     0.593       0.463    0.209    0.757
2 Trans-Equality       47.7     0.582       0.488    0.217    0.719</code></pre>
</div>
</div>
</section>
<section id="assessing-balance-in-covariates-2" class="level2">
<h2 class="anchored" data-anchor-id="assessing-balance-in-covariates-2">Assessing balance in covariates</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Balance</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rearrange data</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>pretreatment_balance <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Pivot columns except treatement assigned</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">"covariate"</span>, <span class="at">values_to =</span>  <span class="st">"value"</span>, <span class="sc">-</span>treatment_assigned) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Pivot rows two two columns for treatment and placebo</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> treatment_assigned) <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate covariate balance</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Difference =</span> <span class="st">`</span><span class="at">Trans-Equality</span><span class="st">`</span> <span class="sc">-</span> Recycling</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  covariate   Recycling `Trans-Equality` Difference
  &lt;chr&gt;           &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;
1 vf_age         46.3             47.7      1.40   
2 vf_female       0.593            0.582   -0.0103 
3 vf_democrat     0.463            0.488    0.0246 
4 vf_white        0.209            0.217    0.00790
5 vf_vg_12        0.757            0.719   -0.0375 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="summary" class="level1 inverse">
<h1 class="inverse"><i class="fa-solid fa-home" aria-label="home"></i> Summary</h1>
<section id="summary-1" class="level2">
<h2 class="anchored" data-anchor-id="summary-1">Summary</h2>
<ul>
<li><p>Causal Claims involve <span class="blue">counterfactual comparisons</span></p></li>
<li><p>The <span class="blue">fundamental problem of causal inference</span> is that for an individual only observe one of many potential outcomes</p></li>
<li><p><span class="blue">Causal identification</span> refers to the assumptions necessary to generate credible causal estimates</p></li>
<li><p>Identification for experimental designs follows from the <span class="blue">random assignment of treatment</span> which allows us to produce unbiased estimates of the <span class="blue">Average Treatment Effect</span></p></li>
</ul>
</section>
<section id="references" class="level2">




</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Broockman2016-pi" class="csl-entry" role="listitem">
Broockman, David, and Joshua Kalla. 2016. <span>“<span class="nocase">Durably reducing transphobia: A field experiment on door-to-door canvassing</span>.”</span> <em>Science</em> 352 (6282): 220–24.
</div>
</div></section></div></main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>