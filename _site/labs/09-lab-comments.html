<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Your Group Members Names Here">
<meta name="dcterms.date" content="2024-04-02">

<title>POLS 1600 - Lab 09 - Exploring data in the 2020 National Elections Study</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.32/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">POLS 1600</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../class/index.html"> 
<span class="menu-text">Class</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments/index.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#workflow" id="toc-workflow" class="nav-link" data-scroll-target="#workflow">Workflow</a>
  <ul class="collapse">
  <li><a href="#please-render-this-.qmd-file" id="toc-please-render-this-.qmd-file" class="nav-link" data-scroll-target="#please-render-this-.qmd-file">Please render this .qmd file</a></li>
  </ul></li>
  <li><a href="#set-up-your-environment" id="toc-set-up-your-environment" class="nav-link" data-scroll-target="#set-up-your-environment"><span class="header-section-number">1</span> Set up your Environment</a>
  <ul class="collapse">
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link" data-scroll-target="#load-packages"><span class="header-section-number">1.1</span> Load Packages</a></li>
  <li><a href="#set-working-directory-in-r-studio" id="toc-set-working-directory-in-r-studio" class="nav-link" data-scroll-target="#set-working-directory-in-r-studio"><span class="header-section-number">1.2</span> Set working directory in R Studio</a></li>
  </ul></li>
  <li><a href="#download-and-load-the-nes-data-into-r" id="toc-download-and-load-the-nes-data-into-r" class="nav-link" data-scroll-target="#download-and-load-the-nes-data-into-r"><span class="header-section-number">2</span> Download and load the NES data into R</a></li>
  <li><a href="#explore-the-codebook" id="toc-explore-the-codebook" class="nav-link" data-scroll-target="#explore-the-codebook"><span class="header-section-number">3</span> Explore the Codebook</a>
  <ul class="collapse">
  <li><a href="#identify-a-potential-outcome-of-interest" id="toc-identify-a-potential-outcome-of-interest" class="nav-link" data-scroll-target="#identify-a-potential-outcome-of-interest"><span class="header-section-number">3.1</span> Identify a potential outcome of interest</a></li>
  <li><a href="#identify-at-least-one-variable-that-might-predict-variation-in-your-outcome." id="toc-identify-at-least-one-variable-that-might-predict-variation-in-your-outcome." class="nav-link" data-scroll-target="#identify-at-least-one-variable-that-might-predict-variation-in-your-outcome."><span class="header-section-number">3.2</span> Identify at least one variable that might predict variation in your outcome.</a></li>
  </ul></li>
  <li><a href="#get-a-high-level-overview-of-the-data" id="toc-get-a-high-level-overview-of-the-data" class="nav-link" data-scroll-target="#get-a-high-level-overview-of-the-data"><span class="header-section-number">4</span> Get a high level overview of the data</a>
  <ul class="collapse">
  <li><a href="#examine-the-distributions-and-values-of-your-outcome-variable" id="toc-examine-the-distributions-and-values-of-your-outcome-variable" class="nav-link" data-scroll-target="#examine-the-distributions-and-values-of-your-outcome-variable"><span class="header-section-number">4.1</span> Examine the distributions and values of your outcome variable</a></li>
  <li><a href="#describe-any-recoding-of-your-outcome-variable" id="toc-describe-any-recoding-of-your-outcome-variable" class="nav-link" data-scroll-target="#describe-any-recoding-of-your-outcome-variable"><span class="header-section-number">4.2</span> Describe any recoding of your outcome variable</a></li>
  <li><a href="#examine-the-distributions-and-values-of-your-predictor-variable" id="toc-examine-the-distributions-and-values-of-your-predictor-variable" class="nav-link" data-scroll-target="#examine-the-distributions-and-values-of-your-predictor-variable"><span class="header-section-number">4.3</span> Examine the distributions and values of your predictor variable</a></li>
  <li><a href="#describe-any-recoding-of-your-predictors" id="toc-describe-any-recoding-of-your-predictors" class="nav-link" data-scroll-target="#describe-any-recoding-of-your-predictors"><span class="header-section-number">4.4</span> Describe any recoding of your predictor(s)</a></li>
  </ul></li>
  <li><a href="#recode-the-data" id="toc-recode-the-data" class="nav-link" data-scroll-target="#recode-the-data"><span class="header-section-number">5</span> Recode the data</a>
  <ul class="collapse">
  <li><a href="#recode-the-outcome-variables" id="toc-recode-the-outcome-variables" class="nav-link" data-scroll-target="#recode-the-outcome-variables"><span class="header-section-number">5.1</span> Recode the outcome variables</a></li>
  <li><a href="#check-your-recoding-of-your-outcome" id="toc-check-your-recoding-of-your-outcome" class="nav-link" data-scroll-target="#check-your-recoding-of-your-outcome"><span class="header-section-number">5.2</span> Check your recoding of your outcome</a></li>
  <li><a href="#recode-your-predictor-variables" id="toc-recode-your-predictor-variables" class="nav-link" data-scroll-target="#recode-your-predictor-variables"><span class="header-section-number">5.3</span> Recode your predictor variables</a></li>
  </ul></li>
  <li><a href="#describe-the-data" id="toc-describe-the-data" class="nav-link" data-scroll-target="#describe-the-data"><span class="header-section-number">6</span> Describe the Data</a>
  <ul class="collapse">
  <li><a href="#create-a-table-of-summary-statistics" id="toc-create-a-table-of-summary-statistics" class="nav-link" data-scroll-target="#create-a-table-of-summary-statistics"><span class="header-section-number">6.1</span> Create a table of summary statistics</a></li>
  <li><a href="#modify-the-table-to-include-your-predictors" id="toc-modify-the-table-to-include-your-predictors" class="nav-link" data-scroll-target="#modify-the-table-to-include-your-predictors"><span class="header-section-number">6.2</span> Modify the table to include your predictors</a></li>
  <li><a href="#interpret-the-results-of-your-table." id="toc-interpret-the-results-of-your-table." class="nav-link" data-scroll-target="#interpret-the-results-of-your-table."><span class="header-section-number">6.3</span> Interpret the results of your table.</a></li>
  <li><a href="#visualize-the-data" id="toc-visualize-the-data" class="nav-link" data-scroll-target="#visualize-the-data"><span class="header-section-number">6.4</span> Visualize the Data</a></li>
  </ul></li>
  <li><a href="#save-your-data" id="toc-save-your-data" class="nav-link" data-scroll-target="#save-your-data"><span class="header-section-number">7</span> Save your data</a></li>
  <li><a href="#formulate-your-research-question" id="toc-formulate-your-research-question" class="nav-link" data-scroll-target="#formulate-your-research-question"><span class="header-section-number">8</span> Formulate your research question</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 09 - Exploring data in the 2020 National Elections Study</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Your Group Members Names Here </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 2, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level1 unnumbered">
<h1 class="unnumbered">Overview</h1>
<p>In this lab, we’ll explore data from the National Election Studies 2024 Pilot Study. Everything we’ll do today is something we’ve done before and is also something you’ll likely have to do a version of in your final project.</p>
<ol type="1">
<li><p>Set up your workspace (5 minutes)</p></li>
<li><p>Download and load data from the NES into R (10 minutes)</p></li>
<li><p>Explore the codebook for the 2024 Pilot Study (5-10 minutes)</p></li>
<li><p>Get a high level overview of the data to figure out what Recoding needs to be done (5-10 minutes)</p></li>
<li><p>Recode the data (15 minutes)</p></li>
<li><p>Describe the data (15-20 minutes)</p></li>
<li><p>Formulate a set of research questions (10 minutes)</p></li>
<li><p>Save the data (5 minutes)</p></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-a581e64fb382e00dc6a3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a581e64fb382e00dc6a3">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Group 1","Group 2","Group 3","Group 4","Group 5","Group 6","Group 7","Group 8"],["Maia Eng","Andrew Rovinsky","Serafym Rybachkivskyi","Tiffany Eddy","Christopher Maron","Mia Hamilton","Mariana Melzer","Logan Szittai"],["Guadalupe Herrera","Spencer Lorin","Rachel Kim","Daniel Solomon","Daniel Baker","Emily Colon","Kahrie Langham","Keiley Thompson"],["Stephen Robinson","Lucinda Anderson","Kai Blades","Zoe Smith","Neve Diaz-Carr","Davis Kelly","Shannon Feerick-Hillenbrand","Lydell Dyer"],["Jeremiah Harrington","Serenity Hamilton","Emma Coleman","Lorena Calderon","Olivia Hanley","Talia Levine","Jarret Fernandes","Mahir Arora"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Group<\/th>\n      <th>1<\/th>\n      <th>2<\/th>\n      <th>3<\/th>\n      <th>4<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Group","targets":1},{"name":"1","targets":2},{"name":"2","targets":3},{"name":"3","targets":4},{"name":"4","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="goals" class="level1 unnumbered">
<h1 class="unnumbered">Goals</h1>
<p>This week’s lab will give you practice:</p>
<ul>
<li><p>Download and loading data from your own computers (Q1,Q2)</p></li>
<li><p>Exploring a codebook to find interesting relevant variables (Q3)</p></li>
<li><p>Exploring data to understand what needs to be recoded (Q4)</p></li>
<li><p>Recoding data in a clear and precise manner (Q5)</p></li>
<li><p>Describing, summarizing, and exploring data through tables and figures (Q6)</p></li>
<li><p>Formulating research questions (Q7)</p></li>
<li><p>Saving data so you can use it later (Q8)</p></li>
</ul>
</section>
<section id="workflow" class="level1 unnumbered">
<h1 class="unnumbered">Workflow</h1>
<section id="please-render-this-.qmd-file" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="please-render-this-.qmd-file">Please render this .qmd file</h2>
<p>As with every lab, you should:</p>
<ul>
<li>Download the file</li>
<li>Save it in your course folder</li>
<li><strong>Update the <code>author:</code> section of the YAML header to include the names of your group members in attendance.</strong></li>
<li>Render the document</li>
<li>Open the html file in your browser (Easier to read)</li>
<li>Write your code in the <strong>chunks provided under each section</strong></li>
<li>Comment out or delete any test code you do not need</li>
<li><strong>Render the document again after completing a section or chunk</strong> (Error checking)</li>
<li>Upload the final lab to <a href="https://canvas.brown.edu/courses/1094972/assignments" target="_blank">Canvas</a>.</li>
</ul>
</section>
</section>
<section id="set-up-your-environment" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Set up your Environment</h1>
<p>In the code chunk below, please add code to load the package <code>DeclareDesign</code></p>
<section id="load-packages" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="load-packages"><span class="header-section-number">1.1</span> Load Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DeclareDesign)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="set-working-directory-in-r-studio" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="set-working-directory-in-r-studio"><span class="header-section-number">1.2</span> Set working directory in R Studio</h2>
<p>In R studio <strong>set your working directory</strong> to the <strong>folder where this lab is</strong> saved by clicking &gt; Session &gt; Set Working Directory &gt; To Source File Location</p>
<p><img src="images/09-nes6.png" class="img-fluid" style="width:50.0%"></p>
<p>After doing so uncomment <code>getwd()</code> Should print out something like</p>
<blockquote class="blockquote">
<p>“~/Desktop/pols1600/labs/”</p>
</blockquote>
<p>Depending on where your lab is saved</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In the Top Panel of RStudio Click</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Session &gt; Set Working Directory &gt; Source File Location</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Uncomment to Check Where Your File is Saved </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># getwd()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If <code>getwd()</code> says something like ‘~/Downloads/’ click: “File &gt; Save As” and <strong>save this lab</strong> in your <strong>course folder</strong>. Then <strong>close</strong> the version <code>09-lab.qmd</code> that was opened from your Downloads folder and <strong>open</strong> the version of <code>09-lab.qmd</code> that now exists in your course folder.</p>
</div>
</div>
</section>
</section>
<section id="download-and-load-the-nes-data-into-r" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Download and load the NES data into R</h1>
<p>Please click <a href="https://electionstudies.org/data-center/2024-pilot-study/">here</a> to go to the download page for the National Election Studies 2024 Pilot Study</p>
<ul>
<li>Click the <strong>Log-in Button</strong></li>
</ul>
<p><img src="images/09-nes1.png" class="img-fluid" style="width:50.0%"></p>
<ul>
<li>Create an account with the NES</li>
</ul>
<p><img src="images/09-nes2.png" class="img-fluid" style="width:30.0%"></p>
<ul>
<li>Right click (Crtl-click) on the DTA button. This will allow you to select <code>Save Link As...</code> Which should in turn allow you to chose where the file is saved. Save it in the <strong>same folder as 09-lab.qmd</strong></li>
</ul>
<p><img src="images/09-nes3.png" class="img-fluid" style="width:50.0%"> <img src="images/09-nes4.png" class="img-fluid" style="width:50.0%"></p>
<ul>
<li>Unzip <code>anes_pilot_2024_dta_20240319.zip</code>.
<ul>
<li>On a Mac this creates a new folder called <code>anes_pilot_2024_dta_20240319</code> in your course folder which contains the following files:</li>
<li><code>anes_pilot_2024_dta_20240319.dta</code> the data</li>
<li><code>anes_pilot_2024_userguidecodebook_20240319.pdf</code> the codebook for the data</li>
<li>On a PC it may unzip the files directly into your course folder.</li>
</ul></li>
</ul>
<p><img src="images/09-nes5.png" class="img-fluid" style="width:50.0%"></p>
<ul>
<li>Load the data using some version of the following commands:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## IF .dta file is in subfolder where lab is:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># df &lt;- read_dta("~/anes_pilot_2024_dta_20240319/anes_pilot_2024_20240319.dta")</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## IF .dta file is in SAME folder as lab:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># df &lt;- read_dta("anes_pilot_2024_20240319.dta")</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## IF nothing works, fear not, you can load the data from the web as a backup</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="fu">url</span>(<span class="st">"https://pols1600.paultesta.org/files/data/anes_pilot_2024_20240319.dta"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="explore-the-codebook" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Explore the Codebook</h1>
<p>Please open the file <code>anes_pilot_2024_userguidecodebook_20240319.pdf</code>.</p>
<p>It should be in same folder as the data.</p>
<p>Use Control+F for keywords to quickly navigate through the codebook looking for questions and variables that interest you.</p>
<section id="identify-a-potential-outcome-of-interest" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="identify-a-potential-outcome-of-interest"><span class="header-section-number">3.1</span> Identify a potential outcome of interest</h2>
<p>In this and next week’s lab, I’ll be exploring factors that explain variation in the following outcome variables:</p>
<p>A measure</p>
<ul>
<li><p><code>vchoice_rematch</code> “Vote Trump or Biden in 2024”</p>
<ul>
<li><code>1</code> = Donald Trump</li>
<li><code>2</code> = Joe Biden</li>
<li><code>-7</code> = No Answer</li>
<li><code>-1</code> = Inapplicable</li>
</ul></li>
</ul>
<p>And five measures of political participation in the 2020 campaign</p>
<ul>
<li><p><code>mobil_talk</code> “2020 campaign - Talk to others about candidates”</p></li>
<li><p><code>mobil_online</code> “2020 campaign - Participate in online rallies”</p></li>
<li><p><code>mobil_rally</code> “2020 campaign - Attend in person rallies”</p></li>
<li><p><code>mobil_button</code> “2020 campaign - Wear a button or campaign sticker”</p></li>
<li><p><code>mobil_work</code> “2020 campaign - Any other work to support candidates”</p>
<ul>
<li><code>1</code> = Yes</li>
<li><code>2</code> = No</li>
<li><code>-1</code> = Inapplicable</li>
</ul></li>
</ul>
<p><strong>Please find a variable that describes some outcome of interest to you and fill in the following</strong></p>
<ul>
<li><code>outcome_variable_name</code> Question topic
<ul>
<li>variable values</li>
</ul></li>
</ul>
</section>
<section id="identify-at-least-one-variable-that-might-predict-variation-in-your-outcome." class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="identify-at-least-one-variable-that-might-predict-variation-in-your-outcome."><span class="header-section-number">3.2</span> Identify at least one variable that might predict variation in your outcome.</h2>
<p>From a quick skim, I’ve selected the following potential predictors, which I will recode below:</p>
<ul>
<li><code>age</code> Age</li>
<li><code>educ</code> Education</li>
<li><code>faminc_new</code> Income</li>
<li><code>race</code> Race</li>
<li><code>pid7</code> 7 point party identification</li>
</ul>
<p><strong>Please find at least one more predictor which you think might explain variation in your outcome of interest and fill in the following</strong></p>
<ul>
<li><code>predictor_variable_name</code> Question topic
<ul>
<li>variable values</li>
</ul></li>
</ul>
<p>For example, perhaps you’re interested in differences by gender, or ideology, or social media use. See if you can find variables that measure these concepts.</p>
<p>You only needed to identify one, but you can choose to explore more if you want. Don’t choose 50, unless you really like recoding data.</p>
</section>
</section>
<section id="get-a-high-level-overview-of-the-data" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Get a high level overview of the data</h1>
<p>In this section, we’ll get practice quickly looking at variables <strong>to see what, if anything needs to be recoded</strong>.</p>
<p>I had you download the <code>.dta</code> instead of the <code>.csv</code> version of the data, because the <code>.dta</code> includes value labels for the data, which makes it easier to understand what a specific number corresponds to substantively.</p>
<section id="examine-the-distributions-and-values-of-your-outcome-variable" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="examine-the-distributions-and-values-of-your-outcome-variable"><span class="header-section-number">4.1</span> Examine the distributions and values of your outcome variable</h2>
<p>Please uncomment and run the code below</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vote Choice</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>vchoice_rematch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Vote Trump or Biden in 2024"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>vchoice_rematch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    No Answer inapplicable, legitimate skip 
                           -7                            -1 
                 Donald Trump                     Joe Biden 
                            1                             2 
                                                            
                            8                             9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>vchoice_rematch,<span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -7  -1   1   2 
 23 151 869 866 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acts of Participation</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># All variables start with mobil_ prefix</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"mobil"</span>)) <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "mobil_talk"             "mobil_online"           "mobil_rally"           
 [4] "mobil_button"           "mobil_work"             "mobil_talk_skp"        
 [7] "mobil_online_skp"       "mobil_rally_skp"        "mobil_button_skp"      
[10] "mobil_work_skp"         "mobil_talk_pg_timing"   "mobil_online_pg_timing"
[13] "mobil_rally_pg_timing"  "mobil_button_pg_timing" "mobil_work_pg_timing"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Political Talk</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>mobil_talk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020 campaign - Talk to others about candidates"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>mobil_talk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    No Answer inapplicable, legitimate skip 
                           -7                            -1 
                          Yes                            No 
                            1                             2 
                                                            
                            8                             9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>mobil_talk,<span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  -7   -1    1    2 
   1  150  704 1054 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the names all variables related to acts of participation in 2020</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>the_participation_vars <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"mobil"</span>)) <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep the variables that measure participation and not survey timing</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>the_participation_vars <span class="ot">&lt;-</span> the_participation_vars[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>From quickly looking at my outcome variables, I know that I will want to:</p>
<ul>
<li>Recode <code>vchoice_rematch</code> to <code>dv_vote_trump2024</code> which
<ul>
<li>equals 1 if <code>vchoice_rematch == 1</code></li>
<li>equals 0 if <code>vchoice_rematch == 2</code></li>
<li>equals <code>NA</code> if <code>vchoice_rematch &lt; 0</code></li>
</ul></li>
<li>Recode variables that start with <code>mobil_*</code> to variables that start with <code>polpart_*</code> and:
<ul>
<li>equal 1 if <code>mobil_* == 1</code></li>
<li>equal 0 if <code>mobil_* == 2</code></li>
<li>equals <code>NA</code> if <code>mobil_*</code> &lt; 0`</li>
</ul></li>
<li>Create <code>dv_participation*</code> which is the sum of respondents’ five responses to the recoded <code>polpart_*</code> variables</li>
</ul>
</section>
<section id="describe-any-recoding-of-your-outcome-variable" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="describe-any-recoding-of-your-outcome-variable"><span class="header-section-number">4.2</span> Describe any recoding of your outcome variable</h2>
<p>In the code chunk below, please repeat this process for the outcome variable you selected in the previous section:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a HLO of your outcome variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Recode <code>YOUR OUTCOME VARIABLE HERE</code> to <code>NAME FOR RECODED VARIABLE</code>
<ul>
<li>Describe what values need to be recoded in the new variable</li>
</ul></li>
</ul>
</section>
<section id="examine-the-distributions-and-values-of-your-predictor-variable" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="examine-the-distributions-and-values-of-your-predictor-variable"><span class="header-section-number">4.3</span> Examine the distributions and values of your predictor variable</h2>
<p>Now I’ll repeat this process for my potential predictor variables.</p>
<p>Please uncomment and run the code below</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Age</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Profile variable: Age"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>not asked 
       -9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  -9.00   33.00   51.00   48.43   63.00   94.00 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Education</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>educ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Profile variable: Education"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>educ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    No HS credential High school graduate         Some college 
                   1                    2                    3 
       2-year degree        4-year degree            Post-grad 
                   4                    5                    6 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>educ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3   4   5   6 
 84 584 381 210 426 224 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>educ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.000   2.000   3.000   3.514   5.000   6.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Income</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>faminc_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Profile variable: Family income"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>faminc_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    No Answer inapplicable, legitimate skip 
                           -7                            -1 
            Less than $10,000             $10,000 - $19,999 
                            1                             2 
            $20,000 - $29,999             $30,000 - $39,999 
                            3                             4 
            $40,000 - $49,999             $50,000 - $59,999 
                            5                             6 
            $60,000 - $69,999             $70,000 - $79,999 
                            7                             8 
            $80,000 - $99,999           $100,000 - $119,999 
                            9                            10 
          $120,000 - $149,999           $150,000 - $199,999 
                           11                            12 
          $200,000 - $249,999           $250,000 - $349,999 
                           13                            14 
          $350,000 - $499,999              $500,000 or more 
                           15                            16 
            Prefer not to say                               
                           97                           998 
                              
                          999 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>faminc_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -7   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  97 
 38 119 126 222 142 141 140 122 149 144 120 109  88  31  20  10   4 184 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>faminc_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  -7.00    3.00    7.00   14.89   10.00   97.00 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Race</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Race"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    No Answer inapplicable, legitimate skip 
                           -7                            -1 
                        White                         Black 
                            1                             2 
                     Hispanic                         Asian 
                            3                             4 
              Native American             Two or more races 
                            5                             6 
                        Other                Middle Eastern 
                            7                             8 
                                                            
                           98                            99 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.000   1.000   1.000   1.751   2.000   8.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>race,<span class="at">useNA =</span> <span class="st">"ifany"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   1    2    3    4    5    6    7    8 
1270  242  239   44   17   69   27    1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Partisanship</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_variable_labels</span>(df<span class="sc">$</span>pid7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Profile variable: 7 point party identification"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_value_labels</span>(df<span class="sc">$</span>pid7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Strong Democrat   Not very strong Democrat 
                         1                          2 
             Lean Democrat                Independent 
                         3                          4 
           Lean Republican Not very strong Republican 
                         5                          6 
         Strong Republican                   Not sure 
                         7                          8 
                Don't know 
                         9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>pid7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  1.000   2.000   4.000   4.023   6.000   8.000      58 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>pid7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3   4   5   6   7   8 
389 228 173 295 172 184 342  68 </code></pre>
</div>
</div>
<p>After taking a quick look at each variable, I know that I’ll want to do the following recoding:</p>
<ul>
<li><code>age</code> to <code>age</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
<ul>
<li>recode <code>-9</code>s to <code>NA</code></li>
</ul></li>
<li><code>educ</code> no recoding needed
<ul>
<li>create indicator <code>has_college_degree</code> which equals <code>1</code> is <code>educ &gt; 4</code> and <code>0</code> otherwise</li>
</ul></li>
<li><code>faminc_new</code> to <code>income</code>
<ul>
<li>recode <code>-7</code> and <code>97</code> to <code>NA</code></li>
</ul></li>
<li><code>race</code> to <code>race_5cat</code>
<ul>
<li><code>race == 1 ~ "White"</code></li>
<li><code>race == 2 ~ "Black"</code></li>
<li><code>race == 3 ~ "Hispanic"</code></li>
<li><code>race == 4 ~ "Asian"</code></li>
<li><code>T ~ "Other"</code> (Collapse other racial categories)</li>
</ul></li>
<li><code>race</code> to <code>is_*</code> binary indicators:
<ul>
<li><code>is_white = 1</code> if <code>race==1</code>, <code>0</code> otherwise</li>
</ul></li>
<li><code>pid7</code> to <code>partyid</code>
<ul>
<li>recode <code>pid7 == 8</code> to <code>4</code> (Classify <code>Don't Knows</code> as Independents)</li>
</ul></li>
<li><code>pid7</code> to <code>is_*</code>: binary indicators:
<ul>
<li><code>is_dem = 1</code> if <code>partyid &lt; 4</code>, 0 otherwise</li>
<li><code>is_rep = 1</code> if <code>partyid &gt; 4</code>, 0 otherwise</li>
<li><code>is_ind = 1</code> if <code>partyid == 4</code>, 0 otherwise</li>
</ul></li>
</ul>
</section>
<section id="describe-any-recoding-of-your-predictors" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="describe-any-recoding-of-your-predictors"><span class="header-section-number">4.4</span> Describe any recoding of your predictor(s)</h2>
<p>In the code chunk below, please repeat this process for the additional predictor(s) you selected in the previous section:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a HLO of your outcome variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Recode <code>YOUR OUTCOME VARIABLE HERE</code> to <code>NAME FOR RECODED VARIABLE</code>
<ul>
<li>Describe what values need to be recoded in the new variable</li>
</ul></li>
</ul>
</section>
</section>
<section id="recode-the-data" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Recode the data</h1>
<p>Now we’ve got a plan of action for how we need to recode the data.</p>
<section id="recode-the-outcome-variables" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="recode-the-outcome-variables"><span class="header-section-number">5.1</span> Recode the outcome variables</h2>
<p>Please uncomment and run the following code chunk which:</p>
<ul>
<li>Creates a variable called <code>dv_vote_trump2024</code> that takes a value of 1 if, vchoice_rematch == 1 (Plans to vote for Trump), 0 if vchoice_rematch == 2 (Plans to vote for Biden), nonresponses (-1,-7), as <code>NA</code></li>
<li>Recodes all the variables that start with <code>mobil_</code> which measure acts of 2020 campaign participation</li>
<li>Sums up the total acts of participation into a variable called `dv_pariticipation.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Recode 2024 Vote Choice</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">dv_vote_trump2024 =</span> <span class="fu">case_when</span>(</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>      vchoice_rematch <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>      vchoice_rematch <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>      T <span class="sc">~</span> <span class="cn">NA</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Recode Individual Acts of Participation</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(the_participation_vars), </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>                \(x) <span class="fu">case_when</span>(</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>                  x <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>                  x <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>                  T <span class="sc">~</span> <span class="cn">NA</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>                ),</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">"polpart_{.col}"</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create Additive Measure of Participation</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">dv_participation =</span> <span class="fu">rowSums</span>(</span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(.,<span class="fu">starts_with</span>(<span class="st">"polpart"</span>)),</span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> T)</span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Please recode your outcome of interest as needed</strong></p>
<p>Remember to save the output of your recode back into the dataframe <code>df</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode your outcome of interest</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-your-recoding-of-your-outcome" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="check-your-recoding-of-your-outcome"><span class="header-section-number">5.2</span> Check your recoding of your outcome</h2>
<p>It’s a good habit to compare your recoded variables to their original values, to make sure your code did what you thought it did.</p>
<p>Please uncomment and run the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check recodes</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode =</span> df<span class="sc">$</span>dv_vote_trump2024,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> df<span class="sc">$</span>vchoice_rematch, </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">useNA =</span> <span class="st">"ifany"</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      original
recode  -7  -1   1   2
  0      0   0   0 866
  1      0   0 869   0
  &lt;NA&gt;  23 151   0   0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode =</span> df<span class="sc">$</span>polpart_mobil_button,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> df<span class="sc">$</span>mobil_button, </span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">useNA =</span> <span class="st">"ifany"</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      original
recode   -1    1    2
  0       0    0 1386
  1       0  373    0
  &lt;NA&gt;  150    0    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">total =</span> df<span class="sc">$</span>dv_participation,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">item =</span> df<span class="sc">$</span>polpart_mobil_button,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">useNA =</span> <span class="st">"ifany"</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     item
total   0   1 &lt;NA&gt;
    0 884   0  149
    1 364  62    1
    2  89 109    0
    3  38  71    0
    4  11  83    0
    5   0  48    0</code></pre>
</div>
</div>
<p>So everything looks in order. I could have probably checked the <code>dv_participation</code> variable against all of its constituent items, but based off comparing it to <code>polpart_mobil_button</code> everything looks in order since: - there are no cases where <code>polpart_mobil_button</code> is 1 but <code>dv_participation</code> is 0 - there are no cases where <code>dv_participation</code> is at it’s max but <code>polpart_mobil_button</code> is 0. - <code>dv_participation</code> has the correct theoretical range from 0 acts to 5 acts.</p>
<p>Now do the same for your outcome variable.</p>
<p><strong>Please check your recoded outcome against its original values</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check recodes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recode-your-predictor-variables" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="recode-your-predictor-variables"><span class="header-section-number">5.3</span> Recode your predictor variables</h2>
<p>Again, I’ve provide some demonstration code to recode the predictors listed above.</p>
<p>Please uncomment and run the following</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Age</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">ifelse</span>(age <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="cn">NA</span>, age),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Education</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">education =</span> educ,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">educ_f =</span> <span class="fu">to_factor</span>(educ), <span class="co">#Convert to Factor for Plotting</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_college_grad =</span> <span class="fu">ifelse</span>(educ <span class="sc">&gt;</span> <span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Income</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">income =</span> <span class="fu">case_when</span>(</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>      faminc_new <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>      faminc_new <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> faminc_new <span class="sc">&gt;</span><span class="dv">16</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>      T <span class="sc">~</span> faminc_new</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Race</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_5cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="fu">to_factor</span>(race),</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>      T <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(., <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"White"</span>,<span class="st">"Black"</span>,<span class="st">"Hispanic"</span>,<span class="st">"Asian"</span>,<span class="st">"Other"</span>)),</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_white =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_black =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_hispanic =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_asian =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_other =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Partisanship</span></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">partyid =</span> <span class="fu">case_when</span>(</span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>      pid7 <span class="sc">==</span> <span class="dv">8</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>      T <span class="sc">~</span> pid7</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_dem =</span> <span class="fu">ifelse</span>(partyid  <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_rep =</span> <span class="fu">ifelse</span>(partyid  <span class="sc">&gt;</span> <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_ind =</span> <span class="fu">ifelse</span>(partyid  <span class="sc">==</span> <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Please recode your additional predictor(s) as needed</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode your additional predictor(s)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, it’s a good habit to check your recodes – particularly if you’re doing something like summing over multiple columns – but for this lab, we’ll live dangerously.</p>
</section>
</section>
<section id="describe-the-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Describe the Data</h1>
<p>Now let’s get some practice <strong>summarizing our data</strong>, presenting these summaries as <strong>tables</strong> and <strong>figures</strong>, and interpretting our results</p>
<section id="create-a-table-of-summary-statistics" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="create-a-table-of-summary-statistics"><span class="header-section-number">6.1</span> Create a table of summary statistics</h2>
<p>Please uncomment and run the code below which demonstrates how to <strong>produce a nicely formatted table</strong> of summary statistics</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vector of numeric variables to summarize</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>the_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dv_vote_trump2024"</span>, </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dv_participation"</span>,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age"</span>,<span class="st">"education"</span>,<span class="st">"income"</span>,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"is_white"</span>,<span class="st">"is_black"</span>,<span class="st">"is_hispanic"</span>,<span class="st">"is_asian"</span>,<span class="st">"is_other"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"partyid"</span>,<span class="st">"is_dem"</span>,<span class="st">"is_rep"</span>,<span class="st">"is_ind"</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Vector of nicely formatted Labels for variables</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>the_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vote for Trump in '24"</span>,</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Acts of Participation in `20"</span>,</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Age"</span>,<span class="st">"Education"</span>, <span class="st">"Income"</span>,</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"White"</span>, <span class="st">"Black"</span>,<span class="st">"Hispanic"</span>,<span class="st">"Asian"</span>,<span class="st">"Other"</span>,</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Party ID"</span>, <span class="st">"Democrat"</span>,<span class="st">"Republican"</span>,<span class="st">"Independent"</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>df_summary <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(the_vars)) <span class="sc">%&gt;%</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span>the_labels) <span class="sc">%&gt;%</span> </span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Variable"</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variable =</span> <span class="fu">factor</span>(Variable, <span class="at">levels =</span> the_labels)</span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Variable) <span class="sc">%&gt;%</span> </span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">Min =</span> <span class="fu">min</span>(value,<span class="at">na.rm =</span> T),</span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">p25 =</span> <span class="fu">quantile</span>(value, <span class="at">prob =</span> .<span class="dv">25</span>,<span class="at">na.rm =</span> T),</span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Median =</span> <span class="fu">quantile</span>(value, <span class="at">prob =</span> .<span class="dv">5</span>,<span class="at">na.rm =</span> T),</span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(value, <span class="at">na.rm =</span> T),</span>
<span id="cb70-35"><a href="#cb70-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">p75 =</span> <span class="fu">quantile</span>(value, <span class="at">prob =</span> .<span class="dv">75</span>,<span class="at">na.rm =</span> T),</span>
<span id="cb70-36"><a href="#cb70-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">Max =</span> <span class="fu">max</span>(value,<span class="at">na.rm =</span> T),</span>
<span id="cb70-37"><a href="#cb70-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">N missing</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(value))</span>
<span id="cb70-38"><a href="#cb70-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-39"><a href="#cb70-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-40"><a href="#cb70-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at results</span></span>
<span id="cb70-41"><a href="#cb70-41" aria-hidden="true" tabindex="-1"></a>df_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 8
   Variable             Min        p25 Median    Mean   p75 Max      `N missing`
   &lt;fct&gt;                &lt;dbl+lb&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl+lb&gt;       &lt;int&gt;
 1 Vote for Trump in '…  0           0      1 5.01e-1   1    1 [No …         174
 2 Acts of Participati…  0           0      0 9.25e-1   1    5 [4-y…           0
 3 Age                  18          33     51 4.94e+1  63.8 94                31
 4 Education             1 [No …     2      3 3.51e+0   5    6 [Pos…           0
 5 Income                1 [No …     3      6 6.43e+0   9   16 [$50…         222
 6 White                 0           0      1 6.65e-1   1    1 [No …           0
 7 Black                 0           0      0 1.27e-1   0    1 [No …           0
 8 Hispanic              0           0      0 1.25e-1   0    1 [No …           0
 9 Asian                 0           0      0 2.30e-2   0    1 [No …           0
10 Other                 0           0      0 8.91e-3   0    1 [No …           0
11 Party ID              1 [No …     2      4 3.88e+0   6    7 [$60…          58
12 Democrat              0           0      0 4.27e-1   1    1 [No …          58
13 Republican            0           0      0 3.77e-1   1    1 [No …          58
14 Independent           0           0      0 1.96e-1   0    1 [No …          58</code></pre>
</div>
</div>
<p>We can then format <code>df_summary</code> as table using <code>knitr()</code> and styling options from the <code>kableExtra</code> package:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p25</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Median</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p75</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">N missing</th>
</tr>
</thead>
<tbody>
<tr class="odd" data-grouplength="2">
<td colspan="8" style="border-bottom: 1px solid"><strong>Outcomes</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Vote for Trump in '24</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">174</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Acts of Participation in `20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even" data-grouplength="8">
<td colspan="8" style="border-bottom: 1px solid"><strong>Demographic Predictors</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Age</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">49.37</td>
<td style="text-align: right;">63.75</td>
<td style="text-align: right;">94</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Education</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.51</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Income</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">6.43</td>
<td style="text-align: right;">9.00</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">222</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">White</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.67</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Black</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Hispanic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Asian</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Other</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd" data-grouplength="4">
<td colspan="8" style="border-bottom: 1px solid"><strong>Political Predictors</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Party ID</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3.88</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Democrat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Republican</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Independent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">58</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="modify-the-table-to-include-your-predictors" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="modify-the-table-to-include-your-predictors"><span class="header-section-number">6.2</span> Modify the table to include your predictors</h2>
<p>Using the two <strong>previous code chunks as a template</strong>, update the code so that the table includes your chosen outcome and predictors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy, paste, and update code from datasummary_me to include your variables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="interpret-the-results-of-your-table." class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="interpret-the-results-of-your-table."><span class="header-section-number">6.3</span> Interpret the results of your table.</h2>
<p><strong>Please write a few sentences that provide a substantive interpretation of your table of descriptive statistics</strong> Your reader should come away with an understanding of what a typical respondent to the 2024 Pilot Study looked like</p>
</section>
<section id="visualize-the-data" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="visualize-the-data"><span class="header-section-number">6.4</span> Visualize the Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(race_5cat,age,</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> race_5cat))<span class="sc">+</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Race"</span>,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Age"</span>,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Age by Race in 2024 NES Pilot Study"</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">col=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="09-lab-comments_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="save-your-data" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Save your data</h1>
</section>
<section id="formulate-your-research-question" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Formulate your research question</h1>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In general, I try not to recode the original variables, but instead create new columns, with different names. But, like this footnote, it seems overly verbose to create something like <code>age_recoded</code>, so I’ll break my general rule<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>