{
  "hash": "f3fe1d63e6a5084cc8b34dcd95dcd55d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 09 - Exploring data in the 2020 National Elections Study\"\nauthor: \"Your Group Members Names Here\"\ndate: \"Last Updated 2024-04-02\"\nformat:\n  html:\n    toc: true\n    toc-location: right\n    toc-float: true\n    toc-depth: 2\n    number-sections: true\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  message: false\n  cache: true\n---\n\n\n\n# Overview {.unnumbered}\n\nIn this lab, we'll explore data from the National Election Studies 2024 Pilot Study. Everything we'll do today is something we've done before and is also something you'll likely have to do a version of in your final project.\n\n1. Set up your workspace (5 minutes)\n\n2. Download and load data from the NES into R (10 minutes)\n\n3. Explore the codebook for the 2024 Pilot Study (5-10 minutes)\n\n4. Get a high level overview of the data to figure out what Recoding needs to be done (5-10 minutes)\n\n5. Recode the data (15 minutes)\n\n6. Describe the data (15-20 minutes)\n\n7. Formulate a set of research questions (10 minutes)\n\n8. Save the data (5 minutes)\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-a581e64fb382e00dc6a3\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a581e64fb382e00dc6a3\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\"],[\"Group 1\",\"Group 2\",\"Group 3\",\"Group 4\",\"Group 5\",\"Group 6\",\"Group 7\",\"Group 8\"],[\"Maia Eng\",\"Andrew Rovinsky\",\"Serafym Rybachkivskyi\",\"Tiffany Eddy\",\"Christopher Maron\",\"Mia Hamilton\",\"Mariana Melzer\",\"Logan Szittai\"],[\"Guadalupe Herrera\",\"Spencer Lorin\",\"Rachel Kim\",\"Daniel Solomon\",\"Daniel Baker\",\"Emily Colon\",\"Kahrie Langham\",\"Keiley Thompson\"],[\"Stephen Robinson\",\"Lucinda Anderson\",\"Kai Blades\",\"Zoe Smith\",\"Neve Diaz-Carr\",\"Davis Kelly\",\"Shannon Feerick-Hillenbrand\",\"Lydell Dyer\"],[\"Jeremiah Harrington\",\"Serenity Hamilton\",\"Emma Coleman\",\"Lorena Calderon\",\"Olivia Hanley\",\"Talia Levine\",\"Jarret Fernandes\",\"Mahir Arora\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Group<\\/th>\\n      <th>1<\\/th>\\n      <th>2<\\/th>\\n      <th>3<\\/th>\\n      <th>4<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Group\",\"targets\":1},{\"name\":\"1\",\"targets\":2},{\"name\":\"2\",\"targets\":3},{\"name\":\"3\",\"targets\":4},{\"name\":\"4\",\"targets\":5}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n# Goals {.unnumbered}\n\nThis week's lab will give you practice:\n\n- Download and loading data from your own computers (Q1,Q2)\n\n- Exploring a codebook to find interesting relevant variables (Q3)\n\n- Exploring data to understand what needs to be recoded (Q4)\n\n- Recoding data in a clear and precise manner (Q5)\n\n- Describing, summarizing, and exploring data through tables and figures (Q6)\n\n- Formulating research questions (Q7)\n\n- Saving data so you can use it later (Q8)\n\n\n\n\n\n# Workflow {.unnumbered}\n\n## Please render this .qmd file {.unnumbered}\n\nAs with every lab, you should:\n\n-   Download the file\n-   Save it in your course folder\n-   **Update the `author:` section of the YAML header to include the names of your group members in attendance.**\n-   Render the document\n-   Open the html file in your browser (Easier to read)\n-   Write your code in the **chunks provided under each section**\n-   Comment out or delete any test code you do not need\n-   **Render the document again after completing a section or chunk** (Error checking)\n-   Upload the final lab to [Canvas](https://canvas.brown.edu/courses/1094972/assignments){target=\"_blank\"}.\n\n\n\n# Set up your Environment\n\nIn the code chunk below, please add code to load the package `DeclareDesign`\n\n\n## Load Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Libraries\nlibrary(tidyverse)\nlibrary(haven)\nlibrary(labelled)\nlibrary(kableExtra)\nlibrary(DeclareDesign)\n```\n:::\n\n\n## Set working directory in R Studio\n\nIn R studio **set your working directory** to the **folder where this lab is** saved by clicking > Session > Set Working Directory > To Source File Location\n\n![](images/09-nes6.png){width=50%}\n\nAfter doing so uncomment `getwd()` Should print out something like\n\n> \"~/Desktop/pols1600/labs/\"\n\nDepending on where your lab is saved\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# In the Top Panel of RStudio Click\n# Session > Set Working Directory > Source File Location\n\n# Uncomment to Check Where Your File is Saved \n# getwd()\n```\n:::\n\n\n:::{.callout-note}\nIf `getwd()` says something like '~/Downloads/' click: \"File > Save As\" and **save this lab** in your **course folder**. Then **close** the version `09-lab.qmd` that was opened from your Downloads folder and **open** the version of `09-lab.qmd` that now exists in your course folder.\n:::\n\n\n# Download and load the NES data into R\n\nPlease click [here](https://electionstudies.org/data-center/2024-pilot-study/) to go to the download page for the National Election Studies 2024 Pilot Study\n\n- Click the **Log-in Button**\n\n![](images/09-nes1.png){width=50%}\n\n- Create an account with the NES\n\n![](images/09-nes2.png){width=30%}\n\n- Right click (Crtl-click) on the DTA button. This will allow you to select `Save Link As...` Which should in turn allow you to chose where the file is saved. Save it in the **same folder as 09-lab.qmd**\n\n![](images/09-nes3.png){width=50%}\n![](images/09-nes4.png){width=50%}\n\n- Unzip `anes_pilot_2024_dta_20240319.zip`. \n  - On a Mac this creates a new folder called `anes_pilot_2024_dta_20240319` in your course folder which contains the following files:\n  - `anes_pilot_2024_dta_20240319.dta` the data\n  - `anes_pilot_2024_userguidecodebook_20240319.pdf` the codebook for the data\n  - On a PC it may unzip the files directly into your course folder.  \n\n![](images/09-nes5.png){width=50%}\n\n- Load the data using some version of the following commands:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## IF .dta file is in subfolder where lab is:\n# df <- read_dta(\"~/anes_pilot_2024_dta_20240319/anes_pilot_2024_20240319.dta\")\n\n## IF .dta file is in SAME folder as lab:\n# df <- read_dta(\"anes_pilot_2024_20240319.dta\")\n\n## IF nothing works, fear not, you can load the data from the web as a backup\ndf <- read_dta(url(\"https://pols1600.paultesta.org/files/data/anes_pilot_2024_20240319.dta\"))\n```\n:::\n\n\n\n\n# Explore the Codebook\n\nPlease open the file `anes_pilot_2024_userguidecodebook_20240319.pdf`. \n\nIt should be in same folder as the data.\n\nUse Control+F for keywords to quickly navigate through the codebook looking for questions and variables that interest you.\n\n## Identify a potential outcome of interest\n\n\nIn this and next week's lab, I'll be exploring factors that explain variation in the following outcome variables:\n\nA measure \n\n- `vchoice_rematch` \"Vote Trump or Biden in 2024\"\n  \n  - `1` = Donald Trump\n  - `2` = Joe Biden\n  - `-7` = No Answer\n  - `-1` = Inapplicable\n\nAnd five measures of political participation in the 2020 campaign\n  \n- `mobil_talk` \"2020 campaign - Talk to others about candidates\"\n- `mobil_online` \"2020 campaign - Participate in online rallies\"\n- `mobil_rally` \"2020 campaign - Attend in person rallies\"\n- `mobil_button` \"2020 campaign - Wear a button or campaign sticker\"\n- `mobil_work` \"2020 campaign - Any other work to support candidates\"\n\n  - `1` = Yes\n  - `2` = No\n  - `-1` = Inapplicable\n\n**Please find a variable that describes some outcome of interest to you and fill in the following**\n\n- `outcome_variable_name` Question topic\n  - variable values \n\n## Identify at least one variable that might predict variation in your outcome.\n\nFrom a quick skim, I've selected the following potential predictors, which I will recode below:\n\n- `age` Age\n- `educ` Education\n- `faminc_new` Income\n- `race` Race\n- `pid7` 7 point party identification\n\n\n**Please find at least one more predictor which you think might explain variation in your outcome of interest and fill in the following**\n\n- `predictor_variable_name` Question topic\n  - variable values \n\nFor example, perhaps you're interested in differences by gender, or ideology, or social media use. See if you can find variables that measure these concepts. \n\nYou only needed to identify one, but you can choose to explore more if you want. Don't choose 50, unless you really like recoding data.\n\n\n# Get a high level overview of the data\n\nIn this section, we'll get practice quickly looking at variables **to see what, if anything needs to be recoded**. \n\nI had you download the `.dta` instead of the `.csv` version of the data, because the `.dta` includes value labels for the data, which makes it easier to understand what a specific number corresponds to substantively.\n\n\n## Examine the distributions and values of your outcome variable\n\nPlease uncomment and run the code below\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Vote Choice\nget_variable_labels(df$vchoice_rematch)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Vote Trump or Biden in 2024\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$vchoice_rematch)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                    No Answer inapplicable, legitimate skip \n                           -7                            -1 \n                 Donald Trump                     Joe Biden \n                            1                             2 \n                                                            \n                            8                             9 \n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$vchoice_rematch,useNA = \"ifany\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n -7  -1   1   2 \n 23 151 869 866 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Acts of Participation\n# All variables start with mobil_ prefix\ndf %>% select(starts_with(\"mobil\")) %>% names()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"mobil_talk\"             \"mobil_online\"           \"mobil_rally\"           \n [4] \"mobil_button\"           \"mobil_work\"             \"mobil_talk_skp\"        \n [7] \"mobil_online_skp\"       \"mobil_rally_skp\"        \"mobil_button_skp\"      \n[10] \"mobil_work_skp\"         \"mobil_talk_pg_timing\"   \"mobil_online_pg_timing\"\n[13] \"mobil_rally_pg_timing\"  \"mobil_button_pg_timing\" \"mobil_work_pg_timing\"  \n```\n\n\n:::\n\n```{.r .cell-code}\n# Political Talk\nget_variable_labels(df$mobil_talk)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"2020 campaign - Talk to others about candidates\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$mobil_talk)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                    No Answer inapplicable, legitimate skip \n                           -7                            -1 \n                          Yes                            No \n                            1                             2 \n                                                            \n                            8                             9 \n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$mobil_talk,useNA = \"ifany\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  -7   -1    1    2 \n   1  150  704 1054 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Save the names all variables related to acts of participation in 2020\nthe_participation_vars <- df %>% select(starts_with(\"mobil\")) %>% names()\n# Only keep the variables that measure participation and not survey timing\nthe_participation_vars <- the_participation_vars[1:5]\n```\n:::\n\n\nFrom quickly looking at my outcome variables, I know that I will want to:\n\n\n- Recode `vchoice_rematch` to `dv_vote_trump2024` which \n  - equals 1 if `vchoice_rematch == 1` \n  - equals 0 if `vchoice_rematch == 2` \n  - equals `NA` if `vchoice_rematch < 0`\n\n- Recode variables that start with `mobil_*` to variables that start with `polpart_*` and:\n  - equal 1 if `mobil_* == 1` \n  - equal 0 if `mobil_* == 2` \n  - equals `NA` if `mobil_*` < 0`\n\n- Create `dv_participation*` which is the sum of respondents' five responses to the recoded `polpart_*` variables \n\n## Describe any recoding of your outcome variable\n\nIn the code chunk below, please repeat this process for the outcome variable you selected in the previous section:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get a HLO of your outcome variable\n```\n:::\n\n\n\n- Recode `YOUR OUTCOME VARIABLE HERE` to `NAME FOR RECODED VARIABLE`\n  - Describe what values need to be recoded in the new variable\n  \n\n\n## Examine the distributions and values of your predictor variable\n\nNow I'll repeat this process for my potential predictor variables.\n\nPlease uncomment and run the code below\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Age\nget_variable_labels(df$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Profile variable: Age\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nnot asked \n       -9 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(df$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  -9.00   33.00   51.00   48.43   63.00   94.00 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Education\nget_variable_labels(df$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Profile variable: Education\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    No HS credential High school graduate         Some college \n                   1                    2                    3 \n       2-year degree        4-year degree            Post-grad \n                   4                    5                    6 \n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  1   2   3   4   5   6 \n 84 584 381 210 426 224 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(df$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   2.000   3.000   3.514   5.000   6.000 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Income\nget_variable_labels(df$faminc_new)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Profile variable: Family income\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$faminc_new)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                    No Answer inapplicable, legitimate skip \n                           -7                            -1 \n            Less than $10,000             $10,000 - $19,999 \n                            1                             2 \n            $20,000 - $29,999             $30,000 - $39,999 \n                            3                             4 \n            $40,000 - $49,999             $50,000 - $59,999 \n                            5                             6 \n            $60,000 - $69,999             $70,000 - $79,999 \n                            7                             8 \n            $80,000 - $99,999           $100,000 - $119,999 \n                            9                            10 \n          $120,000 - $149,999           $150,000 - $199,999 \n                           11                            12 \n          $200,000 - $249,999           $250,000 - $349,999 \n                           13                            14 \n          $350,000 - $499,999              $500,000 or more \n                           15                            16 \n            Prefer not to say                               \n                           97                           998 \n                              \n                          999 \n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$faminc_new)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n -7   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  97 \n 38 119 126 222 142 141 140 122 149 144 120 109  88  31  20  10   4 184 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(df$faminc_new)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  -7.00    3.00    7.00   14.89   10.00   97.00 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Race\nget_variable_labels(df$race)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Race\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$race)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                    No Answer inapplicable, legitimate skip \n                           -7                            -1 \n                        White                         Black \n                            1                             2 \n                     Hispanic                         Asian \n                            3                             4 \n              Native American             Two or more races \n                            5                             6 \n                        Other                Middle Eastern \n                            7                             8 \n                                                            \n                           98                            99 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(df$race)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   1.000   1.000   1.751   2.000   8.000 \n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$race,useNA = \"ifany\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n   1    2    3    4    5    6    7    8 \n1270  242  239   44   17   69   27    1 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Partisanship\nget_variable_labels(df$pid7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Profile variable: 7 point party identification\"\n```\n\n\n:::\n\n```{.r .cell-code}\nget_value_labels(df$pid7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           Strong Democrat   Not very strong Democrat \n                         1                          2 \n             Lean Democrat                Independent \n                         3                          4 \n           Lean Republican Not very strong Republican \n                         5                          6 \n         Strong Republican                   Not sure \n                         7                          8 \n                Don't know \n                         9 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(df$pid7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n  1.000   2.000   4.000   4.023   6.000   8.000      58 \n```\n\n\n:::\n\n```{.r .cell-code}\ntable(df$pid7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  1   2   3   4   5   6   7   8 \n389 228 173 295 172 184 342  68 \n```\n\n\n:::\n:::\n\n\nAfter taking a quick look at each variable, I know that I'll want to do the following recoding:\n\n- `age` to `age`^[In general, I try not to recode the original variables, but instead create new columns, with different names. But, like this footnote, it seems overly verbose to create something like `age_recoded`, so I'll break my  general rule] \n  - recode `-9`s to `NA`\n- `educ` no recoding needed\n  - create indicator `has_college_degree` which equals `1` is `educ > 4` and `0` otherwise\n- `faminc_new` to `income`\n  - recode `-7` and `97` to `NA`\n- `race` to `race_5cat`\n  - `race == 1 ~ \"White\"`\n  - `race == 2 ~ \"Black\"`\n  - `race == 3 ~ \"Hispanic\"`\n  - `race == 4 ~ \"Asian\"`\n  - `T ~ \"Other\"` (Collapse other racial categories)\n- `race` to `is_*` binary indicators:\n  - `is_white = 1` if `race==1`, `0` otherwise\n- `pid7` to `partyid`\n  - recode `pid7 == 8` to `4` (Classify `Don't Knows` as Independents)\n- `pid7` to `is_*`: binary indicators:\n  - `is_dem = 1` if `partyid < 4`, 0 otherwise \n  - `is_rep = 1` if `partyid > 4`, 0 otherwise \n  - `is_ind = 1` if `partyid == 4`, 0 otherwise \n\n## Describe any recoding of your predictor(s)\n\nIn the code chunk below, please repeat this process for the additional predictor(s) you selected in the previous section:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get a HLO of your outcome variable\n```\n:::\n\n\n\n- Recode `YOUR OUTCOME VARIABLE HERE` to `NAME FOR RECODED VARIABLE`\n  - Describe what values need to be recoded in the new variable\n\n# Recode the data\n\nNow we've got a plan of action for how we need to recode the data.\n\n\n## Recode the outcome variables\n\nPlease uncomment and run the following code chunk which:\n\n- Creates a variable called `dv_vote_trump2024` that takes a value of 1 if, vchoice_rematch == 1 (Plans to vote for Trump), 0 if  vchoice_rematch == 2 (Plans to vote for Biden), nonresponses (-1,-7), as `NA`\n- Recodes all the variables that start with `mobil_` which measure acts of 2020 campaign participation\n- Sums up the total acts of participation into a variable called `dv_pariticipation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  # Recode 2024 Vote Choice\n  mutate(\n    dv_vote_trump2024 = case_when(\n      vchoice_rematch == 1 ~ 1,\n      vchoice_rematch == 2 ~ 0,\n      T ~ NA\n    )\n  ) %>% \n  # Recode Individual Acts of Participation\n  mutate(across(all_of(the_participation_vars), \n                \\(x) case_when(\n                  x == 1 ~ 1,\n                  x == 2 ~ 0,\n                  T ~ NA\n                ),\n                .names = \"polpart_{.col}\"\n                )\n                \n                ) %>% \n  # Create Additive Measure of Participation\n  mutate(\n    dv_participation = rowSums(\n      select(.,starts_with(\"polpart\")),\n      na.rm = T)\n    \n  ) -> df\n```\n:::\n\n\n**Please recode your outcome of interest as needed**\n\nRemember to save the output of your recode back into the dataframe `df`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recode your outcome of interest\n```\n:::\n\n\n\n## Check your recoding of your outcome\n\nIt's a good habit to compare your recoded variables to their original values, to make sure your code did what you thought it did.\n\nPlease uncomment and run the following:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Check recodes\n\ntable(\n  recode = df$dv_vote_trump2024,\n  original = df$vchoice_rematch, \n  useNA = \"ifany\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      original\nrecode  -7  -1   1   2\n  0      0   0   0 866\n  1      0   0 869   0\n  <NA>  23 151   0   0\n```\n\n\n:::\n\n```{.r .cell-code}\ntable(\n  recode = df$polpart_mobil_button,\n  original = df$mobil_button, \n  useNA = \"ifany\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      original\nrecode   -1    1    2\n  0       0    0 1386\n  1       0  373    0\n  <NA>  150    0    0\n```\n\n\n:::\n\n```{.r .cell-code}\ntable(\n  total = df$dv_participation,\n  item = df$polpart_mobil_button,\n  useNA = \"ifany\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     item\ntotal   0   1 <NA>\n    0 884   0  149\n    1 364  62    1\n    2  89 109    0\n    3  38  71    0\n    4  11  83    0\n    5   0  48    0\n```\n\n\n:::\n:::\n\n\nSo everything looks in order. I could have probably checked the `dv_participation` variable against all of its constituent items, but based off comparing it to `polpart_mobil_button` everything looks in order since:\n - there are no cases where `polpart_mobil_button` is 1 but `dv_participation` is 0\n - there are no cases where `dv_participation` is at it's max but `polpart_mobil_button` is 0. \n - `dv_participation` has the correct theoretical range from 0 acts to 5 acts.\n\nNow do the same for your outcome variable.\n\n**Please check your recoded outcome against its original values**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Check recodes\n```\n:::\n\n\n## Recode your predictor variables\n\nAgain, I've provide some demonstration code to recode the predictors listed above. \n\nPlease uncomment and run the following\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  mutate(\n    # Age\n    age = ifelse(age < 0, NA, age),\n    # Education\n    education = educ,\n    educ_f = to_factor(educ), #Convert to Factor for Plotting\n    is_college_grad = ifelse(educ > 4,1,0),\n    # Income\n    income = case_when(\n      faminc_new < 0 ~ NA,\n      faminc_new > 0 & faminc_new >16 ~ NA,\n      T ~ faminc_new\n    ),\n    # Race\n    race_5cat = case_when(\n      race < 5 ~ to_factor(race),\n      T ~ \"Other\"\n    ) %>% factor(., levels = c(\"White\",\"Black\",\"Hispanic\",\"Asian\",\"Other\")),\n    is_white = ifelse(race == 1, 1, 0),\n    is_black = ifelse(race == 2, 1, 0),\n    is_hispanic = ifelse(race == 3, 1, 0),\n    is_asian = ifelse(race == 4, 1, 0),\n    is_other = ifelse(race == 5, 1, 0),\n    # Partisanship\n    partyid = case_when(\n      pid7 == 8 ~ 4,\n      T ~ pid7\n    ),\n    is_dem = ifelse(partyid  < 4, 1, 0),\n    is_rep = ifelse(partyid  > 4, 1, 0),\n    is_ind = ifelse(partyid  == 4, 1, 0),\n  ) -> df\n```\n:::\n\n\n**Please recode your additional predictor(s) as needed**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recode your additional predictor(s)\n```\n:::\n\n\nAgain, it's a good habit to check your recodes -- particularly if you're doing something like summing over multiple columns -- but for this lab, we'll live dangerously.\n\n# Describe the Data\n\nNow let's get some practice **summarizing our data**, presenting these summaries as **tables** and **figures**, and interpretting our results\n\n\n## Create a table of summary statistics\n\nPlease uncomment and run the code below which demonstrates how to **produce a nicely formatted table** of summary statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Vector of numeric variables to summarize\nthe_vars <- c(\n  \"dv_vote_trump2024\", \n  \"dv_participation\",\n  \"age\",\"education\",\"income\",\n  \"is_white\",\"is_black\",\"is_hispanic\",\"is_asian\",\"is_other\",\n  \"partyid\",\"is_dem\",\"is_rep\",\"is_ind\"\n)\n\n# Vector of nicely formatted Labels for variables\nthe_labels <- c(\n  \"Vote for Trump in '24\",\n  \"Acts of Participation in `20\",\n  \"Age\",\"Education\", \"Income\",\n  \"White\", \"Black\",\"Hispanic\",\"Asian\",\"Other\",\n  \"Party ID\", \"Democrat\",\"Republican\",\"Independent\"\n)\n\ndf_summary <- df %>% \n  select(all_of(the_vars)) %>%\n  rename_with(~the_labels) %>% \n  pivot_longer(\n    cols = everything(),\n    names_to = \"Variable\"\n  ) %>% \n  mutate(\n    Variable = factor(Variable, levels = the_labels)\n  ) %>% \n  group_by(Variable) %>% \n  summarise(\n    Min = min(value,na.rm = T),\n    p25 = quantile(value, prob = .25,na.rm = T),\n    Median = quantile(value, prob = .5,na.rm = T),\n    Mean = mean(value, na.rm = T),\n    p75 = quantile(value, prob = .75,na.rm = T),\n    Max = max(value,na.rm = T),\n    `N missing` = sum(is.na(value))\n  )\n\n# Look at results\ndf_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 14 × 8\n   Variable             Min        p25 Median    Mean   p75 Max      `N missing`\n   <fct>                <dbl+lb> <dbl>  <dbl>   <dbl> <dbl> <dbl+lb>       <int>\n 1 Vote for Trump in '…  0           0      1 5.01e-1   1    1 [No …         174\n 2 Acts of Participati…  0           0      0 9.25e-1   1    5 [4-y…           0\n 3 Age                  18          33     51 4.94e+1  63.8 94                31\n 4 Education             1 [No …     2      3 3.51e+0   5    6 [Pos…           0\n 5 Income                1 [No …     3      6 6.43e+0   9   16 [$50…         222\n 6 White                 0           0      1 6.65e-1   1    1 [No …           0\n 7 Black                 0           0      0 1.27e-1   0    1 [No …           0\n 8 Hispanic              0           0      0 1.25e-1   0    1 [No …           0\n 9 Asian                 0           0      0 2.30e-2   0    1 [No …           0\n10 Other                 0           0      0 8.91e-3   0    1 [No …           0\n11 Party ID              1 [No …     2      4 3.88e+0   6    7 [$60…          58\n12 Democrat              0           0      0 4.27e-1   1    1 [No …          58\n13 Republican            0           0      0 3.77e-1   1    1 [No …          58\n14 Independent           0           0      0 1.96e-1   0    1 [No …          58\n```\n\n\n:::\n:::\n\n\n\nWe can then format `df_summary` as table using `knitr()` and styling options from the `kableExtra` package:\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Variable </th>\n   <th style=\"text-align:right;\"> Min </th>\n   <th style=\"text-align:right;\"> p25 </th>\n   <th style=\"text-align:right;\"> Median </th>\n   <th style=\"text-align:right;\"> Mean </th>\n   <th style=\"text-align:right;\"> p75 </th>\n   <th style=\"text-align:right;\"> Max </th>\n   <th style=\"text-align:right;\"> N missing </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"2\"><td colspan=\"8\" style=\"border-bottom: 1px solid;\"><strong>Outcomes</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Vote for Trump in '24 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.50 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 174 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Acts of Participation in `20 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.93 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr grouplength=\"8\"><td colspan=\"8\" style=\"border-bottom: 1px solid;\"><strong>Demographic Predictors</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Age </td>\n   <td style=\"text-align:right;\"> 18 </td>\n   <td style=\"text-align:right;\"> 33 </td>\n   <td style=\"text-align:right;\"> 51 </td>\n   <td style=\"text-align:right;\"> 49.37 </td>\n   <td style=\"text-align:right;\"> 63.75 </td>\n   <td style=\"text-align:right;\"> 94 </td>\n   <td style=\"text-align:right;\"> 31 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Education </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3.51 </td>\n   <td style=\"text-align:right;\"> 5.00 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Income </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 6.43 </td>\n   <td style=\"text-align:right;\"> 9.00 </td>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:right;\"> 222 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> White </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.67 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Black </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.13 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Hispanic </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.13 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Asian </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.02 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Other </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.01 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr grouplength=\"4\"><td colspan=\"8\" style=\"border-bottom: 1px solid;\"><strong>Political Predictors</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Party ID </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 3.88 </td>\n   <td style=\"text-align:right;\"> 6.00 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Democrat </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.43 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Republican </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.38 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Independent </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.20 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 58 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Modify the table to include your predictors\n\nUsing the two **previous code chunks as a template**, update the code so that the table includes your chosen outcome and predictors.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Copy, paste, and update code from datasummary_me to include your variables\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n## Interpret the results of your table.\n\n**Please write a few sentences that provide a substantive interpretation of your table of descriptive statistics** Your reader should come away with an understanding of what a typical respondent to the 2024 Pilot Study looked like  \n\n## Visualize the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  ggplot(aes(race_5cat,age,\n             col = race_5cat))+\n  geom_boxplot()+\n  labs(\n    x = \"Race\",\n    y = \"Age\",\n    title = \"Distribution of Age by Race in 2024 NES Pilot Study\"\n  )+\n  guides(col=\"none\")+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](09-lab-comments_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n# Save your data\n\n\n\n# Formulate your research question\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.32/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}